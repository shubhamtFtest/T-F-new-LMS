(window._walkmeABWebpackJP_latest=window._walkmeABWebpackJP_latest||[]).push([[4],{10:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return l}));var a,o=n(40),i=n(45),s=n(2),c=n(46);function u(){window.onWalkMeMessage=function(e){var t=e.type,n=e.payload;if(t===s.N&&"function"==typeof n.func)a=n.func;else if(t===s.vb){var r=n.userGuid,c=n.walkmeEndUserId,u=n.uuid,d=n.siteConfig,l=n.globalConfig,p=n.clientSideSFOauth;Object(o.a)().dispatch(Object(i.b)(r,c,u,d,l,p))}else Object(o.a)().dispatch(e)}}function d(t){return new e((function(e,n){try{var o=t.payload;o?r(o,{resolve:e,reject:n}):r(t,{payload:{resolve:e,reject:n}}),a(t)}catch(e){n(e)}}))}function l(e,t,n){void 0===n&&(n={});var r=t;c.a.isPrivateConversation()&&r&&r.value&&(r.value="#####"),a({type:s.g,payload:{type:e,data:r,options:n}})}}).call(this,n(33).Promise,n(14).assign)},108:function(e,t,n){"use strict";(function(e,n){function r(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}window._walkmeActionBotInternal={walkmeOpenUrl:function(e){return location.href(e)},evaluateTagsById:function(){return e.resolve(!0)},getUserJsonSettings:function(){}};var a=function(){return window.parent._walkmeActionBotInternal?window.parent._walkmeActionBotInternal:window._walkmeActionBotInternal},o=function(){var t,o=(t=n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!(t&&t.length>0)||a().evaluateTagsById(t));case 1:case"end":return e.stop()}}),e)})),function(){var n=this,a=arguments;return new e((function(e,o){var i=t.apply(n,a);function s(t){r(i,e,o,s,c,"next",t)}function c(t){r(i,e,o,s,c,"throw",t)}s(void 0)}))});return function(e){return o.apply(this,arguments)}}();t.a={init:function(e){Object.keys(e).forEach((function(t){window._walkmeActionBotInternal[t]=e[t]}))},walkmeOpenUrl:function(e){return e&&a().walkmeOpenUrl(e)},evaluateTagsById:o,getUserJsonSettings:function(){return a().getUserJsonSettings()}}}).call(this,n(33).Promise,n(42))},12:function(e,t,n){"use strict";(function(e,r,a,o){n.d(t,"p",(function(){return g})),n.d(t,"n",(function(){return h})),n.d(t,"a",(function(){return m})),n.d(t,"q",(function(){return y})),n.d(t,"b",(function(){return w})),n.d(t,"e",(function(){return x})),n.d(t,"d",(function(){return I})),n.d(t,"k",(function(){return k})),n.d(t,"l",(function(){return j})),n.d(t,"h",(function(){return C})),n.d(t,"g",(function(){return S})),n.d(t,"r",(function(){return T})),n.d(t,"j",(function(){return N})),n.d(t,"o",(function(){return _})),n.d(t,"c",(function(){return M})),n.d(t,"f",(function(){return B})),n.d(t,"s",(function(){return E})),n.d(t,"m",(function(){return A})),n.d(t,"i",(function(){return U}));var i=n(6),s=n.n(i),c=n(315),u=n(2),d=n(1),l=n(10),p=n(27);function f(){return(f=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t,n,a,o,i,s){try{var c=e[i](s),u=c.value}catch(e){return void n(e)}c.done?t(u):r.resolve(u).then(a,o)}function b(e){return function(){var t=this,n=arguments;return new r((function(r,a){var o=e.apply(t,n);function i(e){v(o,r,a,i,s,"next",e)}function s(e){v(o,r,a,i,s,"throw",e)}i(void 0)}))}}var g=function(e){"remove"in e&&"function"==typeof e.remove?e.remove():e.parentNode.removeChild(e)};function h(){var e=document.getElementById(d.G);e&&(g(e),document.head&&document.head.append(e))}function m(e){var t,n;(function(){var e=document.getElementById(d.v);e&&g(e);var t=document.getElementById(d.G);t&&(t.textContent="")}(),e)?c.test(e)?(t=e,(n=document.createElement("link")).id=d.v,n.onload=function(){return Object(l.c)({type:u.j})},n.type="text/css",n.rel="stylesheet",n.href=t,document.head&&document.head.append(n)):function(e){var t=document.getElementById(d.G);t||((t=document.createElement("style")).id=d.G,document.head&&document.head.append(t));var n=document.createTextNode(e);t.append(n),Object(l.c)({type:u.j})}(e):Object(l.c)({type:u.j})}function y(e,t){var n=e.toLowerCase().indexOf(t.toLowerCase());if(!t||-1===n)return[e];var r=n+t.length;return[e.slice(0,n),e.slice(n,r),e.slice(r)]}function w(e){return new r((function(t){return setTimeout(t,e)}))}function x(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=new Date),void 0===n&&(n=new Date),e-(n.getTime()-t.getTime())}function I(e){return Math.round((Date.now()-e)/1e3)}function k(e,t){return e.settings.botId!==t}var O=function(e){return e.toLowerCase().replace(/(['"`])/g,"").replace(/\s/g,"-")};function j(e,t){return void 0===t&&(t=d.M.text),e.map((function(e,n){return Object(p.c)(e.displayValue)&&Object(p.c)(e.extractValue)?{id:t===d.M.staticSuggestion?""+d.J+O(String(e.displayValue))+"-"+n:O(String(e.displayValue))+"-"+n,displayName:e.displayValue,type:d.M.text,extractValue:e.extractValue}:"object"!=typeof e?{id:t===d.M.staticSuggestion?""+d.J+O(String(e))+"-"+n:O(String(e))+"-"+n,displayName:e,type:e.type||d.M.text}:{}})).filter((function(e){var t=e.displayName;return Object(p.c)(t)}))}function C(e,t){return void 0===e&&(e=[]),void 0===t&&(t=""),e.find((function(e){var n=e.displayName;return String(n).toLowerCase().trim()===t.toLowerCase().trim()}))}function S(e,t){var n=e.previousElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}var T=function(e){var t=(new DOMParser).parseFromString(e,"text/html");return s()(t,["body","textContent"],"")},N=function(){var e=b(a.mark((function e(t){var n;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.c)({type:u.wb,payload:{searchTerm:t}});case 3:return n=e.sent,e.abrupt("return",n.map((function(e){return f({},e,{displayName:e.name})})));case 7:e.prev=7,e.t0=e.catch(0),console.warn("Deployables search failed.",e.t0);case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=b(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.c)({type:u.db,payload:{text:t}});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.warn("BBCodes resolve failed.",e.t0);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=b(a.mark((function e(t){var n,r,o,i,s,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=""),n=/\[var].+?\[\/var]|\[wm-data].+?\[\/wm-data]|\[jquery].+?\[\/jquery]|\[cookie].+?\[\/cookie]/g,r=t.match(n)){e.next=5;break}return e.abrupt("return");case 5:o=r.reduce((function(e,t){var n;return f({},e,((n={})[t]="",n))}),{}),i=0,s=Object.keys(o);case 7:if(!(i<s.length)){e.next=15;break}return c=s[i],e.next=11,_(c);case 11:o[c]=e.sent;case 12:i++,e.next=7;break;case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=b(a.mark((function e(){var t,n,i,s,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N(""),n=N(" "),e.next=4,r.all([t,n]);case 4:return i=e.sent,s=[].concat(i[0],i[1]),c=new Map,s.forEach((function(e){c.set(e.id,e)})),e.abrupt("return",o(c.values()));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e,t,n){return void 0===e&&(e=1),String(t.displayName).localeCompare(String(n.displayName))*e},A=function(e){var t=e.suggestions,n=e.staticSuggestions;return Boolean(t&&t.length||n&&n.length)};function U(e){var t,n=e.suggestions.length,r="I found "+(1===n?"the":n)+" "+e.settings.pullValuesFrom+" "+(t="result",(n>1?t+"s":t)+". Please select from my Suggestions below."),a="No "+e.settings.pullValuesFrom+" results found.",o=e.staticSuggestions.length?a+" Please select from my Suggestions below.":a+" Please try again.";return n>0?r:o}}).call(this,n(14).assign,n(33).Promise,n(42),n(124).from)},120:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(6),a=n.n(r),o=n(24),i=n(22),s=n(25),c=n(62),u=n(10),d=n(35),l=n(12),p=n(1),f=n(13),v=n(17),b=function(e){return function(t,n){if(!v.a.isCanceled(e)){t(Object(i.a)(!1));var r=n().settings,b=r.conversationUnpublishedText,g=r.conversationUpdatedText,h=a()(e,["response","data","reason"],""),m=p.m;h?("WRONG_DATA"===h.version&&(m=g||p.n.conversationUpdatedText),"NOT_PUBLISHED"!==h.published&&"WRONG_ID"!==h.conversationId||(m=b||p.n.conversationUnpublishedText),"NOT_ASSIGNED"===h.conversationId&&(m=p.m)):d.a.error(e),t(Object(c.c)()),t(Object(s.a)()),t(Object(o.a)(m));var y=n(),w=y.settings,x=w.botId,I=w.name,k=y.conversation,O=k.picked,j=k.currentNode,C=k.conversationStarted,S=k.conversationLength,T=y.dialog;T&&O&&j&&Object(u.b)(p.d.conversationEnded,{oId:O.id,oName:O.name,pId:T.id,aAppType:j.type,aoId:j.id,aoName:j.name,seekTime:Object(l.d)(C),total:S,reason:3,type:"actionBotConversation",owName:I,pInit:{id:x,type:f.h.actionBot,appType:"actionBotBot"}})}}}},121:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var a=n(2),o=n(1),i=n(17);function s(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}var c=function(e,t){return void 0===t&&(t=""),{type:a.bb,payload:{salesforceState:e,oauthUrl:t}}},u=function(t,n){return function(){var c,u=(c=r.mark((function e(s,c){var u,d,l,p,f,v;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:a.J,payload:{suggestions:[{id:o.H}]}}),u=c().dialog,d=u.botId,l=u.id,p=u.conversationId,e.next=4,i.a.getNextConversationNode(d,p,l,t,{queryText:n});case 4:f=e.sent,v=f.data.suggestions,s({type:a.J,payload:{suggestions:v.map((function(e){return{id:e,displayName:e}}))}});case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new e((function(e,r){var a=c.apply(t,n);function o(t){s(a,e,r,o,i,"next",t)}function i(t){s(a,e,r,o,i,"throw",t)}o(void 0)}))});return function(e,t){return u.apply(this,arguments)}}()}}).call(this,n(33).Promise,n(42))},124:function(e,t){var n=Object.prototype.toString,r=function(e){return"function"==typeof e||"[object Function]"===n.call(e)},a=Math.pow(2,53)-1,o=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),a)};e.exports={get from(){return window&&window.Array&&window.Array.from&&"function"==typeof window.Array.from.toString&&String(window.Array.from.toString()).indexOf("[native code]")>-1?window.Array.from:function(e){var t=this,n=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var a,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!r(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2])}for(var s,c=o(n.length),u=r(t)?Object(new t(c)):new Array(c),d=0;d<c;)s=n[d],u[d]=i?void 0===a?i(s,d):i.call(a,s,d):s,d+=1;return u.length=c,u}}}},136:function(e,t,n){"use strict";(function(e,r){var a=n(108),o=n(84),i=n(316),s=n.n(i),c=n(317),u=n.n(c);function d(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}function l(t){return function(){var n=this,r=arguments;return new e((function(e,a){var o=t.apply(n,r);function i(t){d(o,e,a,i,s,"next",t)}function s(t){d(o,e,a,i,s,"throw",t)}i(void 0)}))}}var p=function(){var e=l(r.mark((function e(t){var n,a,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filter((function(e){return"condition"===e.type})),a=n.map((function(e){return Object(o.getTagConditions)(e.condition.logic)})),e.next=4,f(a);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var t=l(r.mark((function t(n){var o,i;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o={},i=u()(s()(n)),t.next=5,e.all(i.map((function(e){return a.a.evaluateTagsById([e])})));case 5:return t.sent.forEach((function(e,t){return e&&(o[i[t]]=i[t])})),t.abrupt("return",o);case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",{});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}();t.a={getConditionsFlatData:p,getConditionsFlatDataByTagConditions:f}}).call(this,n(33).Promise,n(42))},17:function(e,t,n){"use strict";(function(e,r,a){var o=n(123),i=n.n(o),s=n(6),c=n.n(s),u=n(40),d=n(121),l=n(45),p=n(1);function f(){return(f=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t,n,a,o,i,s){try{var c=e[i](s),u=c.value}catch(e){return void n(e)}c.done?t(u):r.resolve(u).then(a,o)}function b(e){return function(){var t=this,n=arguments;return new r((function(r,a){var o=e.apply(t,n);function i(e){v(o,r,a,i,s,"next",e)}function s(e){v(o,r,a,i,s,"throw",e)}i(void 0)}))}}var g=function(e){Object(u.a)().getState().salesforce.salesforceState!==p.O.WAITING&&Object(u.a)().dispatch(Object(d.a)(p.O.WAITING,e))},h=function(){Object(u.a)().getState().salesforce.salesforceState!==p.O.RUNNING&&Object(u.a)().dispatch(Object(d.a)(p.O.RUNNING))},m=function(e){return"need access token for salesforce"===c()(e,["response","data","message"])},y=i.a.CancelToken,w=y.source(),x=function(e){return new r((function(t){return setTimeout((function(){return t()}),e)}))};function I(e){return k.apply(this,arguments)}function k(){return(k=b(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=Date.now()),e.prev=1,e.next=4,i.a.get("/oauth2/pingToken",{timeout:7e4});case 4:Object(u.a)().dispatch(Object(l.e)()),e.next=17;break;case 7:if(e.prev=7,e.t0=e.catch(1),!(Date.now()-t<36e4&&e.t0.response&&e.t0.response.data&&401===e.t0.response.data.status&&"no token matching request"===e.t0.response.data.message)){e.next=16;break}return e.next=13,x(5e3);case 13:return e.next=15,I(t);case 15:return e.abrupt("return");case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}var O=function(){var e=b(a.mark((function e(t){var n,o,s,u,d,l,p,f=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.method,o=t.retry,s=void 0===o||o,u=f.length,d=new Array(u>1?u-1:0),l=1;l<u;l++)d[l-1]=f[l];return e.prev=2,e.next=5,i.a[n].apply(i.a,d);case 5:return p=e.sent,h(),e.abrupt("return",p);case 10:if(e.prev=10,e.t0=e.catch(2),!m(e.t0)||!s){e.next=17;break}return g(c()(e.t0,["response","data","data","salesforceOauthUrl"])),e.next=16,I();case 16:return e.abrupt("return",O.apply(void 0,[{method:n,retry:!1}].concat(d)));case 17:return h(),e.abrupt("return",r.reject(e.t0));case 19:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),j=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return O.apply(void 0,[{method:e}].concat(n))}},C={get:j("get"),post:j("post"),put:j("put"),delete:j("delete")};i.a.interceptors.request.use((function(t){var n=Object(u.a)().getState().settings,r=n.jwt,a=n.envId,o=n.apiBaseUrl;if(r&&Number.isFinite(a)){var i=f({},t.headers,{Authorization:"Bearer "+r,"x-wmab-wmenv":a,"x-wmab-utc-offset":(new Date).getTimezoneOffset(),Pragma:"no-cache"});e(t,{headers:i,cancelToken:w.token})}return o&&e(t,{url:o+t.url}),t}),r.reject);var S=function(e){void 0===e&&(e="Unknown reason"),w.cancel('Request was canceled by Cancel token. Reason: "'+e+'"')},T=function(){var e=b(a.mark((function e(t,n,o,i){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.get("/bots/"+t+"/conversations/"+n+"/dialogs/"+o+"/nodes/"+i+"/suggestions").catch((function(e){var a=c()(e,["response","status"]);return[500,504].includes(a)?T(t,n,o,i):r.reject(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),N=function(){var e=b(a.mark((function e(t){var n,r,o,i,s;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.connectionId,r=t.conversationId,o=t.dialogId,i=t.nodeId,e.next=3,C.get("/oauth2/status",{params:{connectionId:n,conversationId:r,dialogId:o,nodeId:i}});case 3:return s=e.sent,e.abrupt("return",s.connected);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a={setNewCancelToken:function(){S("New token generated"),w=y.source()},cancelAllRequests:S,isCanceled:function(e){return i.a.isCancel(e)},fetchJWT:function(e){return void 0===e&&(e={}),e.clientSideSFOauth&&(i.a.defaults.withCredentials=!0),C.post("/init",e)},fetchBotData:function(e){return C.get("/bots/"+e)},sendUserMessage:function(e){var t=e.botId,n=e.conversationId,r=e.dialogId,a=e.text,o=e.nodeId,i=e.conditionsFlatData;return C.post("/v1/bots/"+t+"/conversations/"+n+"/dialogs/"+r+"/messages",{nodeId:o,text:a,conditionsFlatData:i})},postNode:function(e){var t=e.botId,n=e.conversationId,r=e.nodeId,a=e.dialog;return C.post("/bots/"+t+"/conversations/"+n+"/nodes/"+r,{dialog:a})},postConnectionMessage:function(e){var t=e.botId,n=e.conversationId,r=e.nodeId,a=e.text,o=e.dialog;return C.post("/bots/"+t+"/conversations/"+n+"/messages",{text:a,nodeId:r,dialog:o})},getConversation:function(e,t){return C.get("/bots/"+e+"/conversations/"+t)},getConversations:function(e,t){return C.get("/bots/"+e+"/conversations",{params:{text:t}})},getFirstConversationNode:function(e,t,n,r){return C.get("/bots/"+e+"/conversations/"+t+"/dialogs/"+n+"/nodes/first",r?{params:r}:void 0)},getNextConversationNode:function(e,t,n,r,a){return C.get("/bots/"+e+"/conversations/"+t+"/dialogs/"+n+"/nodes/"+r,a?{params:a}:void 0)},createDialog:function(e,t,n){return C.post("/bots/"+e+"/conversations/"+t+"/dialogs",n?{dataMapping:n}:void 0)},getDialog:function(e,t,n){return C.get("/bots/"+e+"/conversations/"+t+"/dialogs/"+n)},restoreDialog:function(e,t){return C.get("/bots/"+e+"/dialogs/restore",{params:f({},t&&{conversationId:t}),timeout:3e3})},finishDialog:function(e,t,n){return C.put("/bots/"+e+"/conversations/"+t+"/dialogs/"+n,{isFinished:!0})},removeAnswer:function(e,t,n,r){return C.delete("/bots/"+e+"/conversations/"+t+"/dialogs/"+n+"/messages/"+r)},getRestSuggestions:T,checkSalesforceStatus:N,logoutSalesforce:function(){return C.get("/oauth2/logout")}}}).call(this,n(14).assign,n(33).Promise,n(42))},22:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return p}));var r=n(10),a=n(2),o=n(1),i=n(17);function s(){return(s=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=function(e){return{type:a.Q,payload:{insideForm:e}}},u=function(e){return{type:a.k,payload:{isBotThinking:e}}},d=function(e){return{type:a.m,payload:{isBotWaitForAnswer:e}}},l=function(){return function(e,t){var n=t();Object(r.c)({type:a.i});var c,u=n.settings,d=u.botId,l=u.name,p=u.additionalSettings,f={type:"actionBotBot",oId:d,oName:l};if(n.dialog&&n.dialog.id&&n.conversation.currentNode&&!p.playMode){var v=n.conversation.currentNode;Object(r.b)(o.d.chatMinimized,s({},f,{pId:n.dialog.id,aAppType:v.type,aoId:v.id,aoName:v.name}))}else Object(r.b)(o.d.chatMinimized,f);e((c=!0,{type:a.i,payload:{isBotHiding:c}})),i.a.cancelAllRequests("Chat window minimized")}},p=function(){return function(e,t){var n=t();Object(r.c)({type:a.h});var c=n.settings,u=c.botId,d=c.name,l=c.additionalSettings,p={type:"actionBotBot",oId:u,oName:d};if(n.dialog&&n.dialog.id&&n.conversation.currentNode&&!l.playMode){var f=n.conversation.currentNode;Object(r.b)(o.d.chatClosed,s({},p,{pId:n.dialog.id,aAppType:f.type,aoId:f.id,aoName:f.name}))}else Object(r.b)(o.d.chatClosed,p);e({type:a.A}),i.a.cancelAllRequests("Chat window closed")}}}).call(this,n(14).assign)},24:function(e,t,n){"use strict";(function(e,r,a,o){n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return z})),n.d(t,"h",(function(){return L})),n.d(t,"d",(function(){return q})),n.d(t,"c",(function(){return G})),n.d(t,"g",(function(){return X})),n.d(t,"f",(function(){return $})),n.d(t,"e",(function(){return ee}));var i=n(177),s=n.n(i),c=n(6),u=n.n(c),d=n(171),l=n.n(d),p=n(84),f=n(107),v=n.n(f),b=n(178),g=n.n(b),h=n(2),m=n(17),y=n(46),w=n(136),x=n(10),I=n(72),k=n(35),O=n(12),j=n(27),C=n(36),S=n(25),T=n(22),N=n(45),_=n(62),M=n(120),B=n(1),E=n(13);function A(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}function U(t){return function(){var n=this,r=arguments;return new e((function(e,a){var o=t.apply(n,r);function i(t){A(o,e,a,i,s,"next",t)}function s(t){A(o,e,a,i,s,"throw",t)}i(void 0)}))}}function D(){return(D=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var F=g()(),P=function(e,t,n){return void 0===t&&(t={isUserMessage:!1,success:!0,isRichMessage:!1}),void 0===n&&(n=!1),{type:h.c,payload:{message:{text:e,options:D({},t,{timestamp:Date.now()}),isForm:n}}}},W=function(e,t){return{type:h.b,payload:{id:e,nodeId:t}}},z=function(e,t){return void 0===t&&(t=!1),{type:h.d,payload:{separator:e,isNewSeparator:t}}},L=function(e,t){return function(){var n=U(a.mark((function n(r){return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:h.mb,payload:{nodeId:e,value:t}});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};function R(e,t,n){return H.apply(this,arguments)}function H(){return(H=U(a.mark((function e(t,n,o){var i,s,c,d,l,f,v,b,g,h,m,x,I,k,O,j,C;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n(),s=i.conversation.picked,c=i.settings,d=c.botId,l=c.conversationsNodesMap,f=i.dialog,v=s.id,b=u()(l,[v,"nodes"],[]),g=Object(p.getDialogFlatData)(f),e.next=6,w.a.getConditionsFlatData(b);case 6:if(h=e.sent,s.isForm&&t(Object(T.c)(s.isForm)),m=Object(p.checkNextNode)({conversationNodes:b,nextConversationNodeId:o,conditionsFlatData:h,flatData:g}),x=m.nextId){e.next=11;break}return e.abrupt("return",null);case 11:return I=u()(l,[v,"nodesMap",x]),e.next=14,y.a.processConversationNode({botId:d,conversationId:v,dialog:f,node:I});case 14:return k=e.sent,O=k.node,(j=k.dialog)&&j.data[x]&&t(Object(_.a)(((C={})[x]=j.data[x],C))),r(O,{data:n().dialog.data||{}}),e.abrupt("return",O);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t,n){return V.apply(this,arguments)}function V(){return(V=U(a.mark((function e(t,n,r){var o,i,s,c,d,l,p,f,v,b,g,h,y,x,I,k,j,C,S;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n(),i=o.conversation.picked,s=o.settings.botId,c=o.dialog,d=i.id,l=c.id,e.prev=3,e.next=6,m.a.getNextConversationNode(s,d,l,r);case 6:return p=e.sent,f=p.data,e.abrupt("return",f);case 11:if(e.prev=11,e.t0=e.catch(3),"INSUFFICIENT_DATA"!==u()(e.t0,["response","data","reason","bbCodes"])){e.next=32;break}v=u()(e.t0,["response","data","data","bbCodes"],[]),b=v.reduce((function(e,t){var n;return D({},e,((n={})[t]="",n))}),{}),g=0,h=Object.keys(b);case 17:if(!(g<h.length)){e.next=25;break}return y=h[g],e.next=21,Object(O.o)(y);case 21:b[y]=e.sent;case 22:g++,e.next=17;break;case 25:return e.next=27,m.a.getNextConversationNode(s,d,l,r,{bbCodes:b});case 27:return x=e.sent,I=x.data,e.abrupt("return",I);case 32:if("INSUFFICIENT_DATA"!==u()(e.t0,["response","data","reason","tagConditions"])){e.next=42;break}return k=u()(e.t0,["response","data","data","tagConditions"],[]),e.next=36,w.a.getConditionsFlatDataByTagConditions(k);case 36:return j=e.sent,e.next=39,m.a.getNextConversationNode(s,d,l,r,{conditionsFlatData:JSON.stringify(j)});case 39:return C=e.sent,S=C.data,e.abrupt("return",S);case 42:throw e.t0;case 43:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}var G=function(e,t,n){return void 0===t&&(t=new Date),function(){var r=U(a.mark((function r(o,i){var s,c,d,p,f,v,b,g,m,w,I,k,j,S,N,_,E,A,U;return a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,s=i(),c=s.conversation.currentNode,d=u()(c,["settings","app"]),p=u()(c,["settings","id"]),o(Object(C.c)(null)),o(Object(T.a)(!0)),f=i(),v=f.conversation.picked,b=f.settings.botId,g=f.dialog,v&&b&&g){r.next=9;break}return r.abrupt("return");case 9:if(m=g.id,w=y.a.isPrivateConversation(),I=u()(v,B.u,!1),r.t0=n,r.t0){r.next=17;break}return r.next=16,w||I?R(o,i,e):q(o,i,e);case 16:r.t0=r.sent;case 17:if(k=r.t0,d&&Object(x.c)({type:h.o,payload:{app:d,id:p}}),j=i(),!Object(O.k)(j,b)){r.next=22;break}return r.abrupt("return");case 22:if(j.conversation.picked&&(!j.dialog||j.dialog.id===m)){r.next=24;break}return r.abrupt("return");case 24:if(S=k.aDelay,N=k.type,_=Object(O.e)(S,t),E=u()(k,["settings","app"],""),N!==B.i.action||E!==h.qb&&E!==h.rb||o(Object(T.a)(!1)),!(_>0)){r.next=35;break}return A=l()(j.messages),r.next=32,Object(O.b)(_);case 32:if(U=l()(i().messages),A===U){r.next=35;break}return r.abrupt("return");case 35:o(Object(T.a)(!1)),o(Object(C.c)(k)),o(Object(C.g)(k,m)),r.next=43;break;case 40:r.prev=40,r.t1=r.catch(0),o(Object(M.a)(r.t1));case 43:case"end":return r.stop()}}),r,null,[[0,40]])})));return function(e,t){return r.apply(this,arguments)}}()},J=function(e,t){try{var n=t(),r=n.settings.liveChat,a=r.enabledGlobal,o=r.suggestionText,i=n.conversation.currentNode,s=n.analytics.retriesAnswerQuestion,c=n.suggestions.items,d=u()(i,"liveChatEnabled",!1),l=u()(i,"failsBeforeLiveChatTriggered",3);if(a&&d&&s>=l)c&&c.length&&c[0].id===B.w||e(Object(S.d)([{id:B.w,type:B.M.liveChat,displayName:o||B.n.liveChatSuggestionText}].concat(c)))}catch(e){k.a.error(e)}},K=function(e){var t=e.text,n=e.picked,r=e.dialog,o=e.currentNode,i=e.botId;return function(){var e=U(a.mark((function e(s,c){var d,l,f,v,b,g,I,k,j,A,U,D,F,z,L,R,H,q,V,K,Q,Y,X,Z,$,ee,te,ne,re,ae,oe,ie,se,ce,ue,de,le,pe,fe,ve,be,ge;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=r,e.prev=1,s(Object(T.a)(!0)),f=n.id,v=n.name,b=n.isForm,g=void 0!==b&&b,I=r.id,k=o.id,j=o.name,A=o.type,U=o.dataType,D=o.suggestions,F=c(),z=F.settings.conversationsNodesMap,L=y.a.isPrivateConversation(c),R=t,"connection_salesforce"===U&&D&&("true"===t&&D.includes(!0)&&(R=!0),"false"===t&&D.includes(!1)&&(R=!1),D.includes(Number(t))&&(R=Number(t))),H={botId:i,conversationId:f,dialogId:I,text:R,nodeId:k},q=new Date,V=0,K=!1,Q=B.m,Y="extraction",X=null,e.prev=17,Z=null,!(o&&o.settings&&o.settings.queryQuestion)){e.next=28;break}return $=H.text,e.next=23,m.a.getNextConversationNode(i,f,I,k,{queryText:$});case 23:return(Z=e.sent).data.textSettings.blocks[0].inlineStyleRanges=[],Z.data.textSettings.blocks[0].text=Object(O.i)(Z.data),s(G(Z.data.nextConversationNodeId,q,Z.data)),e.abrupt("return");case 28:if(!L&&!g){e.next=34;break}return e.next=31,y.a.sendUserMessage(H,u()(z,[f,"nodesMap",k],null),l);case 31:Z=e.sent,e.next=54;break;case 34:return e.prev=34,e.next=37,m.a.sendUserMessage(H);case 37:Z=e.sent,e.next=54;break;case 40:if(e.prev=40,e.t0=e.catch(34),"INSUFFICIENT_DATA"!==u()(e.t0,["response","data","reason","tagConditions"])){e.next=53;break}return ee=u()(e.t0,["response","data","data","tagConditions"],[]),e.next=46,w.a.getConditionsFlatDataByTagConditions(ee);case 46:return te=e.sent,H.conditionsFlatData=JSON.stringify(te),e.next=50,m.a.sendUserMessage(H);case 50:Z=e.sent,e.next=54;break;case 53:throw e.t0;case 54:ne=Z.data,d=ne,V=ne.id,K=ne.success,Q=ne.errorMessage,Y=ne.errorType,X=ne.nextConversationNodeId,e.next=71;break;case 63:if(e.prev=63,e.t1=e.catch(17),re=u()(e.t1,["response","data"],{}),ae=re.reason,oe=re.message,!ae||"WRONG_DATA"!==ae.text||"connection_salesforce"!==U){e.next=70;break}Q=oe,e.next=71;break;case 70:throw e.t1;case 71:if(ie=c(),!Object(O.k)(ie,i)){e.next=74;break}return e.abrupt("return");case 74:if(s(W(V,k)),s({type:h.e}),se="extraction"===Y?2:1,ce=K?3:se,Object(x.b)(B.d.conversationsQuestionAnswered,{type:"actionBotNode",oId:k,oName:j,owId:n.id,owType:"actionBotConversation",owName:n.name,pId:I,aAppType:U,retries:ie.analytics.retriesAnswerQuestion,value:t,reason:ce},{skipPInit:!0}),!K){e.next=99;break}if((L||g)&&(ue=y.a.getMessageData(ie,d,{conversationId:f,nodeId:k}))&&(s(Object(_.a)(ue)),l=c().dialog),!L&&!g){e.next=89;break}return de=u()(z,[f,"nodes"],[]),le=Object(p.getDialogFlatData)(r),e.next=86,w.a.getConditionsFlatData(de);case 86:pe=e.sent,fe=Object(p.checkNextNode)({conversationNodes:de,nextConversationNodeId:X,conditionsFlatData:pe,flatData:le}),ve=fe.nextId,X=ve;case 89:if(!X){e.next=93;break}s(G(X,q)),e.next=97;break;case 93:return Object(x.b)(B.d.conversationEnded,{oId:f,oName:v,pId:I,aAppType:A,aoId:k,aoName:j,seekTime:Object(O.d)(ie.conversation.conversationStarted),total:ie.conversation.conversationLength,reason:1,type:"actionBotConversation",owName:ie.settings.name,pInit:{id:i,type:E.h.actionBot,appType:"actionBotBot"}}),e.next=96,s(Object(C.b)());case 96:s(Object(N.c)({botId:i}));case 97:e.next=108;break;case 99:if(be=o.aDelay,!((ge=Object(O.e)(be,q))>0)){e.next=104;break}return e.next=104,Object(O.b)(ge);case 104:s(Object(T.a)(!1)),s(P(Q,{isUserMessage:!1,success:!1})),s(Object(S.e)()),s(J);case 108:e.next=113;break;case 110:e.prev=110,e.t2=e.catch(1),s(Object(M.a)(e.t2));case 113:case"end":return e.stop()}}),e,null,[[1,110],[17,63],[34,40]])})));return function(t,n){return e.apply(this,arguments)}}()},Q=function(e,t){try{var n=t(),r=n.settings.liveChat,a=r.enabledGlobal,o=r.enabled,i=r.failsBeforeTrigger,s=r.suggestionText,c=r.temporaryDisabled,u=n.analytics.retriesConversationSearch,d=n.suggestions.items;if(a&&o&&u>=i&&!c)d&&d.length&&d[0].id===B.w||e(Object(S.d)([{id:B.w,type:B.M.liveChat,displayName:s||B.n.liveChatSuggestionText}].concat(d)))}catch(e){k.a.error(e)}},Y=function(e,t){try{var n=t(),r=n.settings,a=r.fallbackConversations,o=r.failsBeforeFallbackSuggested,i=r.conversations,s=n.analytics.retriesConversationSearch,c=n.suggestions.items;if(s>=o&&a.length){var u=c.find((function(e){return e.id===B.w})),d=c.filter((function(e){var t=e.id;return![].concat(a,[B.w]).includes(t)})),l=a.map((function(e){var t=i.find((function(t){return t.id===e}));return t&&{id:e,displayName:t.displayName,type:B.M.conversation}})).filter(Boolean),p=[].concat(u?[u]:[],l,d);e(Object(S.d)(p))}}catch(e){k.a.error(e)}},X=function(e,t){return void 0===t&&(t=!1),function(){var n=U(a.mark((function n(r,i){var c,u,d,l,p,f,v,b,g,y,w,k,N,_,E,A,U,W,z,L,R,H,q,V,G,J,X,Z,$,ee,te,ne,re,ae,oe,ie,se,ce,ue,de,le;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c={isUserMessage:!0,success:!0},t||r(P("string"==typeof e?e:String(e.displayName),c)),r(Object(S.a)()),u=i(),d=u.conversation,l=d.picked,p=d.currentNode,f=u.settings,v=f.botId,b=f.conversationId,g=f.name,y=f.noMatchedConversationErrorMessages,w=f.noConversationsOneSearchItemFoundText,k=f.severalConversationsFoundText,N=f.conversations,_=f.isWalkMeSearchEnabled,E=f.isWalkMeSearchItemsSuggestedInitially,A=f.siteConfig,U=u.dialog,W=u.suggestions.wmSearchItems,!(l&&U&&p&&v)){n.next=10;break}z=Object(j.c)(e.extractValue)?e.extractValue:Object(j.c)(e.displayName)?e.displayName:e,r(K({text:z,picked:l,dialog:U,currentNode:p,botId:v})),n.next=67;break;case 10:if(v){n.next=12;break}return n.abrupt("return");case 12:if(L=[],v!==B.l){n.next=20;break}return R=String(e).trim().toLowerCase(),n.next=17,Object(O.b)(500);case 17:L=N.filter((function(e){return e.keywords.some((function(e){return R.includes(e.toLowerCase())}))})),n.next=42;break;case 20:return n.next=22,m.a.getConversations(v,e);case 22:H=n.sent,q=Object(I.b)(H.data),V=new F.StopwordsManager,(G=A&&A.Custom&&A.Custom.actionbot)&&(J=G.customStopwords),J&&V.initCustomStopwords(J),X=V.filterOutStopwords(e,!0).split(" "),Z=[],$='="'+X.join(" ")+'"',ee=Object(I.d)(q,$),te=X.map((function(e){return"'"+e})).join(" "),ne=Object(I.d)(q,te),re=ee.concat(ne),ae=[],oe=G&&G.fuseSearchSettings,(!re.length||!oe||oe&&!Object(I.c)(oe.useExactMatch))&&(ie=X.join(" | "),ae=Object(I.d)(q,ie)),Z=re.concat(ae),Z=o(new Set([].concat(ee,ne,ae))),L=b?Z.filter((function(e){return e.id===b})):Z;case 42:if(se=i(),!Object(O.k)(se,v)){n.next=45;break}return n.abrupt("return");case 45:return L=L.map((function(e){return D({},e,{type:B.M.conversation})})),n.next=48,Object(I.a)(L);case 48:if(L=n.sent,ce=_?W:[],r({type:h.f,payload:{searchTerm:e}}),!L.length&&!ce.length){n.next=57;break}ue=1===L.length,Object(x.b)(B.d.conversationsSearch,{type:"actionBotBot",oId:v,oName:g,value:e,seekTime:se.analytics.retriesConversationSearch,total:L.length,reason:1}),ue&&0===ce.length?r(Object(C.a)(L[0],!0)):(r(Object(S.d)(L)),de=1===ce.length&&0===L.length,r(P(de?w||B.n.noConversationsOneSearchItemFoundText:k||B.n.severalConversationsFoundText)),r(Object(T.b)(!0))),n.next=66;break;case 57:if(le=s()(y),Object(x.b)(B.d.conversationsSearch,{type:"actionBotBot",oId:v,oName:g,value:e,seekTime:se.analytics.retriesConversationSearch,total:L.length,reason:2}),r(P(le,{isUserMessage:!1,success:!1})),r(Object(S.f)()),!_||!E){n.next=64;break}return n.next=64,r(Object(S.g)());case 64:r(Q),r(Y);case 66:r(Object(T.a)(!1));case 67:n.next=73;break;case 69:n.prev=69,n.t0=n.catch(0),r((a=n.t0,{type:h.jb,payload:{error:a}})),r(Object(M.a)(n.t0));case 73:case"end":return n.stop()}var a}),n,null,[[0,69]])})));return function(e,t){return n.apply(this,arguments)}}()},Z=function(t){var n=e.resolve();return t.forEach((function(e){n=n.then(e)})),n},$=function(e,t,n){return function(){var r=U(a.mark((function r(o,i){var s,c,d,l,p,f,b,g,w;return a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o({type:h.tb,payload:{values:e}}),s=i(),c=s.dialog,d=c.botId,l=c.id,p=c.conversationId,f=s.conversation.picked.nodes,b=s.settings.conversationsNodesMap,g={},w=y.a.isPrivateConversation(),f.map((function(e){return e.validations})).forEach((function(t){t&&t.forEach((function(t){if(!g[t.conversationNodeQuestionId]){var n=t.condition.logic;v.a.apply(n,e)||(g[t.conversationNodeQuestionId]=t.error)}}))})),f.forEach((function(t){if(t.dataType)try{var n=e[t.id];if(t.dataType!==B.C.boolean&&Object.keys(e).includes(t.id.toString())&&!n)return void(g[t.id]="Input can not be empty");y.a.validateAnswer(n,t)||(g[t.id]="Input is not in the correct format")}catch(e){}})),o({type:h.lb,payload:{invalidFields:g}}),!(Object.keys(g).length>0)){r.next=9;break}return r.abrupt("return");case 9:if(!n){r.next=11;break}return r.abrupt("return");case 11:return r.next=13,Z(Object.keys(e).map((function(t){return e[t]&&function(){var n={botId:d,conversationId:p,dialogId:l,text:e[t],nodeId:t};return w?y.a.sendUserMessage(n,u()(b,[p,"nodesMap",t],null),i().dialog):m.a.sendUserMessage(n)}})).filter((function(e){return!!e})));case 13:return r.next=15,Object(C.f)(t)(o,i);case 15:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},ee=function(e,t){return function(){var n=U(a.mark((function n(r,o){var i,s,c;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=o(),s=i.settings.botId,c={type:h.yb,payload:{settings:{id:e,app:t},answers:{},chatHistory:[],options:{conversationId:null,botId:s,dialogId:null}}},Object(x.c)({type:h.i}),Object(x.c)(c);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}}).call(this,n(33).Promise,n(14).assign,n(42),n(124).from)},25:function(e,t,n){"use strict";(function(e,r,a){n.d(t,"d",(function(){return g})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return x})),n.d(t,"g",(function(){return I}));var o=n(6),i=n.n(o),s=n(17),c=n(35),u=n(12),d=n(2),l=n(1);function p(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}function f(t){return function(){var n=this,r=arguments;return new e((function(e,a){var o=t.apply(n,r);function i(t){p(o,e,a,i,s,"next",t)}function s(t){p(o,e,a,i,s,"throw",t)}i(void 0)}))}}function v(){return(v=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var b=function(e){var t=i()(e,["settings","mergeType"],""),n=i()(e,["settings","separatorText"],""),r=i()(e,["settings","sortRecordsBy","type"])?1:-1,a=new Set(e.suggestions),o=u.s.bind(void 0,r),s=t!==l.L.merged,d=Object(u.l)(e.staticSuggestions,s?l.M.staticSuggestion:null).filter((function(e){var t=e.displayName;return!a.has(t)})).sort(o),p={id:l.I,displayName:n,type:l.M.separator},f=Object(u.l)(e.suggestions),v=n&&d.length&&f.length?[p]:[];switch(t){case l.L.top:return d.concat(v,f);case l.L.bottom:return f.concat(v,d);case l.L.merged:return f.concat(d).sort(o);default:return c.a.error(new Error("Unknown static suggestion merge type: "+t)),f}},g=function(e){return{type:d.J,payload:{suggestions:e}}},h=function(e,t){return function(n,r){var a=r().settings,o=e||a.suggestedConversations,i=t||a.conversations,s=o.reduce((function(e,t){var n=i.find((function(e){return e.id===t}));return n?[].concat(e,[v({},n,{type:l.M.conversation})]):e}),[]);n(g(s))}},m=function(){return function(e,t){var n=t().conversation.currentNode;n&&(n.staticSuggestions?e(g(b(n))):e(g(Object(u.l)(n.suggestions))))}},y=function(){return function(e){return e(g([]))}},w=function(e,t){if(!t)return[];var n=Object(u.l)(t);return i()(e,"staticSuggestions",[]).length?b(e):n},x=function(e){return function(){var t=f(a.mark((function t(n,r){var o,l,p,f,v,b,h,m;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r(),l=o.dialog,t.prev=1,n({type:d.I}),t.next=5,s.a.getRestSuggestions(l.botId,l.conversationId,l.id,e);case 5:if(p=t.sent,f=p.data,v=r(),b=i()(v,["conversation","currentNode"]),h=i()(b,"id"),!Object(u.k)(v,l.botId)&&e===h){t.next=12;break}return t.abrupt("return");case 12:m=w(b,f),n(g(m)),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),c.a.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e,n){return t.apply(this,arguments)}}()},I=function(e){return function(){var t=f(a.mark((function t(n){var r;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n({type:d.K}),r=[],e){t.next=8;break}return t.next=5,Object(u.f)();case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,Object(u.j)(e);case 10:r=t.sent;case 11:return t.abrupt("return",n((a=r,{type:d.L,payload:{wmSearchItems:a}})));case 12:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()}}).call(this,n(33).Promise,n(14).assign,n(42))},27:function(e,t,n){"use strict";(function(e,r){n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return y}));var a=n(6),o=n.n(a),i=n(105),s=n.n(i),c=n(302),u=n.n(c),d=n(1),l=n(155);function p(){return(p=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){return function(n,r){void 0===n&&(n=e);var a=t[r.type];return a?a(n,r.payload):n}}var v=function(e){return e||""===e||!1===e||0===e};function b(e,t){void 0===t&&(t=new Date(Date.now()));var n=Math.abs(t.getTime()-e.getTime());return Math.floor(n/864e5)}function g(e,t){var n=b(e,new Date);return 0===n?t.today:1===n?t.yesterday:e.toLocaleString("en-us",{month:"short"})+" "+function(e){if(e>3&&e<21)return e+"th";switch(e%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}}(e.getDate())}function h(e,t){void 0===t&&(t={});var n=r(t||{}).reduce((function(e,t){var n,a,o=t[0],i=t[1];return d.C.hasOwnProperty(i.type)?p({},e,((n={})[o]=i,n)):i.type===d.z.variable&&"object"==typeof i.value?p({},e,r(i.value).reduce((function(e,t){var n,r=t[0],a=t[1];return p({},e,((n={})[r]={type:d.z.variable,value:a},n))}),{})):"identifier"!==i.type||"wm-euid"!==o&&"wm-sfid"!==o?e:p({},e,((a={})[o]=i,a))}),{});function a(e,t){var r=o()(e,["data","mention","id"],0),a=o()(n,r,null);if(!a)return null;var i=o()(a,["settings","format"],d.j.littleEndian),s=Object(l.a)(a,""+d.j[i]),c="boolean"==typeof s?String(s):s;return v(c)?function(e,t){return void 0===t&&(t=""),t?"<"+t+">"+e+"</"+t+">":""===e?" ":e}(c,function(e){var t=/^<(\w+)>.*<\/(\w+)>/.exec(e);if(t){var n=t[1],r=t[2];return n&&r&&n===r?n:""}return""}(t)):t}var i=p({},e,{blocks:e.blocks.map((function(e){return""===e.text&&(e.text="\n"),p({},e,{text:s()(e.text)})}))});return u()(i,void 0,void 0,(function(e,t){switch(e.type){case"LINK":return'<a href="'+e.data.url+'" target="_blank" rel="noopener noreferrer">'+t+"</a>";case"mention":return v(a(e,t))?String(a(e,t)):Object.create({toString:function(){return""},valueOf:function(){return""}});default:return t}}))}function m(e){return e.reduce((function(e,t){var n;return p({},e,((n={})[t.id]=t,n))}),{})}function y(e,t){var n,r=e.reduce((function(e,t){var n=t.text;return e.push(p({},t,{text:n})),e}),[]).reduce((function(r,a,o){if(a.type===d.i.action)return r;if(a.isInvisible)return r;var i=0===o?void 0:e[o-1],s=i&&i.id,c=new Date(a.createdAt);return i&&i.isInvisible?r:(n&&!b(n,c)||(r.push({text:g(c,t),isSeparator:!0}),n=c),Object.keys(a).includes("success")&&!a.success&&s?[].concat(r,[p({},a,{nodeId:s}),{text:a.errorMessage,type:d.i.message,success:!1}]):!a.type&&s?[].concat(r,[p({},a,{nodeId:s})]):(r.push(a),r))}),[]).map((function(e){var t=e.id,n=e.nodeId,r=e.text,a=e.type,o=e.success,i=e.isSeparator,s=e.textSettings,c=e.createdAt,u=e.isForm,d=e.form,l=!a,p=Boolean(s),f=c&&new Date(c).getTime();return l&&t&&n?{text:r,options:{isUserMessage:l,success:o,id:t,nodeId:n,timestamp:f}}:i?{text:r,options:{isSeparator:i}}:{text:r,options:{isRichMessage:p,isUserMessage:l,success:o,timestamp:f},isForm:u,form:d}}));return r.some((function(e){var n=e.text;return e.options.isSeparator&&n===t.today}))||r.push({text:t.today,options:{isSeparator:!0}}),r}}).call(this,n(14).assign,n(14).entries)},270:function(e,t,n){"use strict";var r,a=n(122),o=n(301),i=n(303),s=n(304),c=n(305),u=n(306),d=n(307),l=n(308),p=n(27),f=n(2),v=n(1),b=(n(440),{oauthUrl:"",salesforceState:v.O.CANCELED}),g=Object(p.b)(b,((r={})[f.bb]=function(e,t){return t},r[f.A]=function(){return b},r)),h={messages:o.a,settings:i.a,conversation:s.a,suggestions:c.a,dialog:u.a,loader:d.a,analytics:l.a,salesforce:g};t.a=Object(a.b)(h)},301:function(e,t,n){"use strict";(function(e){var r,a=n(177),o=n.n(a),i=n(2),s=n(27);function c(){return(c=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=[];t.a=Object(s.b)(u,((r={})[i.G]=function(e,t){var n=t.settings;return t.addInitialMessageToChat?[].concat(e,[{text:o()(n.initialMessages),options:{isUserMessage:!1,timestamp:Date.now(),isRichMessage:!0}}]):e},r[i.c]=function(e,t){var n=t.message;return[].concat(e,[n])},r[i.b]=function(e,t){var n=t.id,r=t.nodeId;return e.map((function(t,a){return a===e.length-1?c({},t,{options:c({},t.options,{id:n,nodeId:r})}):t}))},r[i.ab]=function(e,t){var n=t.id,r=t.nodeId,a=e.findIndex((function(e){var t=e.options;return t.id===n&&t.nodeId===r}));return e.slice(0,a-1)},r[i.x]=function(e){return e.map((function(e){return c({},e,{options:{isUserMessage:e.options.isUserMessage,isSeparator:e.options.isSeparator,success:e.options.success,isRichMessage:e.options.isRichMessage,timestamp:e.options.timestamp}})}))},r[i.d]=function(e,t){var n=t.separator,r=t.isNewSeparator;return[].concat(r?e.filter((function(e){return e.text!==n})):e,[{options:{isSeparator:!0},text:n}])},r[i.mb]=function(e,t){var n=t.nodeId,r=t.value;return e.map((function(t,a){var o;return a<e.length-1?t:c({},t,{form:c({},t.form,{values:c({},t.form&&t.form.values,(o={},o[n]=r,o))})})}))},r[i.gb]=function(e,t){var n=t.messages,r=t.defaultLabels,a=t.mentionData;return[].concat(Object(s.e)(n,r,a))},r[i.a]=function(){return u},r[i.A]=function(){return u},r))}).call(this,n(14).assign)},303:function(e,t,n){"use strict";(function(e){var r,a=n(6),o=n.n(a),i=n(27),s=n(1),c=n(2);function u(){return(u=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d={apiBaseUrl:null,walkmeEndUserId:null,jwt:null,uuid:null,botId:null,conversationId:null,name:"",botCustomStyles:[],botActiveCustomStyle:null,initialMessages:[],noMatchedConversationErrorMessages:[],conversations:[],conversationsNodesMap:{},allConversations:[],suggestedConversations:[],fallbackConversations:[],calculateScroll:0,buttonSendText:null,buttonStartOverText:null,conversationUnpublishedText:null,conversationUpdatedText:null,doneText:null,noConversationsOneSearchItemFoundText:null,severalConversationsFoundText:null,suggestionsText:null,chatInputPlaceholderText:null,filterInputPlaceholderText:null,disabledInputText:null,separatorNewText:null,separatorTodayText:null,separatorYesterdayText:null,separatorCompletedText:null,isSuggestedConversationsOnly:!1,forceUpdate:!1,additionalSettings:{playMode:!1,previewEntityType:null},singleConversationPlayed:!1,liveChat:{enabledGlobal:!1,enabled:!1,suggestionText:null,failsBeforeTrigger:null,alwaysShowButton:!1,temporaryDisabled:!1,buttonLiveChatText:""},siteConfig:null,globalConfig:null,visibility:!0,failsBeforeFallbackSuggested:null,featureFlags:null,salesforce:null};t.a=Object(i.b)(d,((r={})[c.vb]=function(e,t){return u({},e,{userGuid:t.userGuid,walkmeEndUserId:t.walkmeEndUserId})},r[c.a]=function(e,t){var n=t.botId,r=t.conversationId,a=t.additionalSettings,o=t.forceUpdate;return u({},e,{botId:n,conversationId:r,additionalSettings:a||d.additionalSettings,forceUpdate:o,botCustomStyles:[],botActiveCustomStyle:null})},r[c.F]=function(e){return u({},e,{botId:null})},r[c.D]=function(e){return u({},e,{botId:null})},r[c.P]=function(e,t){return u({},e,{jwt:t.jwt,uuid:t.uuid,siteConfig:t.siteConfig,globalConfig:t.globalConfig,featureFlags:t.featureFlags,salesforce:t.salesforce})},r[c.G]=function(e,t){var n=t.settings,r=n.name,a=n.initialMessages,i=n.initialMessagesTextSettings,c=n.noMatchedConversationErrorMessages,d=n.suggestedConversations,l=n.fallbackConversations,p=n.buttonSendText,f=n.buttonStartOverText,v=n.buttonLiveChatText,b=n.conversationUnpublishedText,g=n.conversationUpdatedText,h=n.doneText,m=n.noConversationsOneSearchItemFoundText,y=n.severalConversationsFoundText,w=n.suggestionsText,x=n.chatInputPlaceholderText,I=n.filterInputPlaceholderText,k=n.disabledInputText,O=n.separatorNewText,j=n.separatorTodayText,C=n.separatorYesterdayText,S=n.separatorCompletedText,T=n.isSuggestedConversationsOnly,N=n.liveChatSuggestionText,_=n.liveChatEnabled,M=n.failsBeforeLiveChatTriggered,B=n.alwaysShowLiveChatButton,E=n.failsBeforeFallbackSuggested,A=n.isWalkMeSearchEnabled,U=n.isWalkMeSearchItemsSuggestedInitially,D=n.botCustomStyles;return D||(D=[{botId:e.botId,active:!0,botDesignId:1,css:o()(n,"styles","")}]),u({},e,{forceUpdate:!1,name:r,botCustomStyles:D,botActiveCustomStyle:(D||[]).find((function(e){return e.active}))||s.o,initialMessages:a,initialMessagesTextSettings:i,noMatchedConversationErrorMessages:c,suggestedConversations:d,fallbackConversations:l,buttonSendText:p,buttonStartOverText:f,conversationUnpublishedText:b,conversationUpdatedText:g,doneText:h,noConversationsOneSearchItemFoundText:m,severalConversationsFoundText:y,suggestionsText:w,chatInputPlaceholderText:x,filterInputPlaceholderText:I,disabledInputText:k,separatorNewText:O,separatorTodayText:j,separatorYesterdayText:C,separatorCompletedText:S,isSuggestedConversationsOnly:T,liveChat:{enabledGlobal:o()(e,["siteConfig","Settings","liveChat","isEnabled"],!1),enabled:_,temporaryDisabled:!1,suggestionText:N,failsBeforeTrigger:M,alwaysShowButton:B,buttonLiveChatText:v},failsBeforeFallbackSuggested:E,isWalkMeSearchEnabled:A,isWalkMeSearchItemsSuggestedInitially:U})},r[c.E]=function(e,t){var n=t.conversations;return u({},e,{conversations:n,conversationsNodesMap:n?n.reduce((function(e,t){var n;return u({},e,((n={})[t.id]=function(e){return u({},e,{nodesMap:Object(i.d)(e.nodes)})}(t),n))}),{}):{}})},r[c.C]=function(e,t){return u({},e,{allConversations:t.allConversations})},r[c.Y]=function(e){return u({},e,{calculateScroll:e.calculateScroll+1})},r[c.W]=function(e,t){return u({},e,{envId:t.envId})},r[c.V]=function(e,t){return u({},e,{walkmeEndUserId:t.walkmeEndUserId})},r[c.X]=function(e,t){return u({},e,{isWorkstation:t.isWorkstation})},r[c.U]=function(e,t){return u({},e,{apiBaseUrl:t.apiBaseUrl})},r[c.q]=function(e){return u({},e,{singleConversationPlayed:!0})},r[c.cb]=function(e){return u({},e,{conversationId:null})},r[c.A]=function(e,t){return u({},e,{singleConversationPlayed:o()(t,"isChatNeedDestroy",!1)})},r[c.t]=function(e){return u({},e,{liveChat:u({},e.liveChat,{temporaryDisabled:!0})})},r[c.l]=function(e,t){return u({},e,{visibility:t.visibility})},r[c.S]=function(e){return u({},e,{salesforce:{sfUserTokenValid:!1}})},r[c.hb]=function(e){return u({},e,{salesforce:{sfUserTokenValid:!0}})},r))}).call(this,n(14).assign)},304:function(e,t,n){"use strict";(function(e){var r,a=n(27),o=n(2);function i(){return(i=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={picked:null,currentNode:null,byKeyword:null,conversationStarted:Date.now(),conversationLength:0};t.a=Object(a.b)(s,((r={})[o.n]=function(e,t){return i({},e,{picked:t.conversation,byKeyword:t.byKeyword,conversationStarted:Date.now()})},r[o.H]=function(e,t){return i({},e,{currentNode:t.node,conversationLength:t.incrementCounter?e.conversationLength+1:e.conversationLength})},r[o.x]=function(){return s},r[o.a]=function(){return s},r[o.A]=function(){return s},r[o.kb]=function(e,t){var n=t.nodeId;return i({},e,{currentNode:e.picked.nodes.find((function(e){return e.id===n}))})},r))}).call(this,n(14).assign)},305:function(e,t,n){"use strict";(function(e){var r,a=n(27),o=n(2);function i(){return(i=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={items:[],suggestionItems:[],wmSearchItems:[],loading:!1};t.a=Object(a.b)(s,((r={})[o.J]=function(e,t){var n=t.suggestions;return i({},e,{items:[].concat(n,e.wmSearchItems),suggestionItems:n,loading:!1})},r[o.K]=function(e){return i({},e,{loading:!0,wmSearchItems:[]})},r[o.L]=function(e,t){var n=t.wmSearchItems;return i({},e,{items:[].concat(e.suggestionItems,n),wmSearchItems:n,loading:!1})},r[o.I]=function(e){return i({},e,{loading:!0})},r[o.n]=function(){return s},r[o.a]=function(){return s},r[o.A]=function(){return s},r))}).call(this,n(14).assign)},306:function(e,t,n){"use strict";(function(e){var r,a=n(27),o=n(2);function i(){return(i=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=Object(a.b)(null,((r={})[o.q]=function(e,t){return i({},t.dialog)},r[o.r]=function(e,t){var n=t.data,r=Object.keys(n).map((function(e){var t=Number(e);return isNaN(t)?e:t}));return e.dataKeysSequence&&e.dataKeysSequence.length&&(r=[].concat(e.dataKeysSequence.filter((function(e){return!n.hasOwnProperty(e)})),r)),i({},e,{dataKeysSequence:r,data:i({},e.data,n)})},r[o.s]=function(e,t){var n=e.data,r=void 0===n?{}:n,a=e.dataKeysSequence,o=void 0===a?[]:a,s=o.findIndex((function(e){return e===t.dataKey})),c=-1===s?o:o.slice(0,s);return i({},e,{dataKeysSequence:c,data:c.reduce((function(e,t){var n;return r.hasOwnProperty(t)?i({},e,((n={})[t]=r[t],n)):e}),{})})},r[o.z]=function(){return null},r[o.a]=function(){return null},r[o.A]=function(){return null},r[o.mb]=function(e,t){var n,r=t.nodeId,a=t.value;return i({},e,{data:i({},e.data,(n={},n[r]=a,n))})},r[o.tb]=function(e,t){var n=t.values;return i({},e,{data:i({},e.data,n)})},r[o.lb]=function(e,t){return i({},e,{invalidFields:t.invalidFields})},r))}).call(this,n(14).assign)},307:function(e,t,n){"use strict";(function(e){var r,a=n(2),o=n(27);function i(){return(i=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={isBotThinking:!1,isBotWaitForAnswer:!0,insideForm:!1,isBotHiding:!1};t.a=Object(o.b)(s,((r={})[a.Q]=function(e,t){return i({},e,{insideForm:t.insideForm})},r[a.k]=function(e,t){return i({},e,{isBotThinking:t.isBotThinking})},r[a.m]=function(e,t){return i({},e,{isBotWaitForAnswer:t.isBotWaitForAnswer})},r[a.x]=function(e){return i({},e,{isBotThinking:!1})},r[a.a]=function(){return s},r[a.A]=function(){return s},r[a.i]=function(e,t){return i({},e,{isBotHiding:t.isBotHiding})},r))}).call(this,n(14).assign)},308:function(e,t,n){"use strict";(function(e){var r,a=n(2),o=n(27);function i(){return(i=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={retriesConversationSearch:0,retriesAnswerQuestion:0,searchTerm:null};t.a=Object(o.b)(s,((r={})[a.f]=function(e,t){var n=t.searchTerm;return i({},e,{retriesConversationSearch:e.retriesConversationSearch+1,searchTerm:n})},r[a.n]=function(e){return i({},e,{retriesConversationSearch:0,searchTerm:null})},r[a.e]=function(e){return i({},e,{retriesAnswerQuestion:e.retriesAnswerQuestion+1})},r[a.x]=function(e){return i({},e,{retriesAnswerQuestion:0})},r[a.H]=function(e){return i({},e,{retriesAnswerQuestion:0})},r[a.a]=function(){return s},r[a.A]=function(){return s},r))}).call(this,n(14).assign)},309:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return u}));var a=n(45),o=n(1),i=n(10);function s(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}function c(t){return function(){var n=this,r=arguments;return new e((function(e,a){var o=t.apply(n,r);function i(t){s(o,e,a,i,c,"next",t)}function c(t){s(o,e,a,i,c,"throw",t)}i(void 0)}))}}function u(e){var t=null,n=!1;e.subscribe(c(r.mark((function o(){var i,s,c,u,d;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.getState(),s=i.settings,c=s.botId,u=s.jwt,d=s.forceUpdate,!u||!c){r.next=8;break}if(t!==c&&(t=c,e.dispatch(Object(a.c)({botId:c,isInitialBotLoading:!0}))),!d||n){r.next=8;break}return n=!0,r.next=7,e.dispatch(Object(a.c)({botId:c,isInitialBotLoading:!0}));case 7:n=!1;case 8:t=c;case 9:case"end":return r.stop()}}),o)}))));var s=e.subscribe((function(){var t=e.getState(),n=t.messages,r=t.dialog,a=t.settings,c=a.botId,u=a.name;(r&&r.isRestored&&s(),n&&n.length)&&(n.some((function(e){return e.options.isUserMessage}))&&(Object(i.b)(o.d.endUserEngaged,{type:"actionBotBot",oId:c,oName:u}),s()))}))}}).call(this,n(33).Promise,n(42))},321:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var a=n(322),o=n(2),i={topEdge:{className:"wm-top-edge",styles:{zIndex:10,width:"100%",height:"4px",position:"absolute",top:0,left:0,cursor:"ns-resize"}},bottomEdge:{className:"wm-bottom-edge",styles:{zIndex:10,width:"100%",height:"4px",position:"absolute",bottom:0,left:0,cursor:"ns-resize"}},rightEdge:{className:"wm-right-edge",styles:{zIndex:10,width:"4px",height:"100%",position:"absolute",top:0,right:0,cursor:"ew-resize"}},leftEdge:{className:"wm-left-edge",styles:{zIndex:10,width:"4px",height:"100%",position:"absolute",top:0,left:0,cursor:"ew-resize"}},rightTopEdge:{className:"wm-right-top-edge",styles:{zIndex:15,width:"10px",height:"10px",position:"absolute",top:"2px",right:"2px",cursor:"nesw-resize"}},leftTopEdge:{className:"wm-left-top-edge",styles:{zIndex:15,width:"10px",height:"10px",position:"absolute",top:"2px",left:"2px",cursor:"nwse-resize"}},rightBottomEdge:{className:"wm-right-bottom-edge",styles:{zIndex:15,width:"10px",height:"10px",position:"absolute",bottom:"2px",right:"2px",cursor:"nwse-resize"}},leftBottomEdge:{className:"wm-left-bottom-edge",styles:{zIndex:15,width:"10px",height:"10px",position:"absolute",bottom:"2px",left:"2px",cursor:"nesw-resize"}}},s={dragHeader:{className:"wm-drag-header",styles:{position:"absolute",top:0,left:0,height:"57px",width:"85%",zIndex:9,cursor:"move"}}};function c(e){var t=window.parent.document.querySelector("."+s.dragHeader.className);t&&(t.style.height=e+"px")}function u(e,t){return Number(e&&e.initialSize&&e.initialSize[t])||320}var d=function(t,n){var c=this;this.initialize=function(){if(c.isMobileBrowser)c._node.style.width="100%",c._node.style.height="100%";else{var e=!0;c.globalConfig&&!1===c.globalConfig.resizable&&(e=!1),c.applyInitialPosition(),e&&(c.findChildIframes(),c.createEdgeElements())}},this.applyInitialPosition=function(){var t=parseInt(document.defaultView.getComputedStyle(c._node).width,10),n=parseInt(document.defaultView.getComputedStyle(c._node).height,10),r=window.innerWidth/2-t/2,a=window.innerHeight/2-n/2;if(c.globalConfig&&c.globalConfig.initialPosition){var o=c.globalConfig.initialPosition,i=o.top,s=o.left;i&&(a=Number(i)),s&&(r=Number(s))}var u={margin:"inherit",top:a+"px",left:r+"px",bottom:"auto",right:"auto"};e(c._node.style,u)},this.createNodeElements=function(t,n){return r(t).map((function(t){var r=t[0],a=t[1],o=document.createElement("div");return o.className=a.className,o.dataset[n]=r,e(o.style,a.styles),o}))},this.createEdgeElements=function(){var e=document.createDocumentFragment();c.createNodeElements(i,"edge").forEach((function(t){t.addEventListener("mousedown",c.mouseDownHandler),e.appendChild(t)})),c.createNodeElements(s,"drag").forEach((function(t){t.addEventListener("mousedown",c.dragHandler),t.addEventListener("dblclick",c.dblClickHandler),e.appendChild(t)})),c._node.appendChild(e)},this.mouseDownHandler=function(e){var t=e.target.dataset.edge,n="resize"+t[0].toUpperCase()+t.slice(1);"function"==typeof c[n]&&(c._mouseMoveHandlerNames.push(n),c.changeVisibilityChildIframes("none"),c._isFullScreen=!1,c._startX=e.clientX,c._startY=e.clientY,c._startWidth=parseInt(document.defaultView.getComputedStyle(c._node).width,10),c._startHeight=parseInt(document.defaultView.getComputedStyle(c._node).height,10),document.documentElement.addEventListener("mousemove",c[n]),document.documentElement.addEventListener("mouseup",c.stopResize))},this.dragHandler=function(e){c.changeVisibilityChildIframes("none");var t=parseInt(document.defaultView.getComputedStyle(c._node).left,10),n=parseInt(document.defaultView.getComputedStyle(c._node).top,10);c._windowWidth=window.innerWidth,c._windowHeight=window.innerHeight,c._startWidth=parseInt(document.defaultView.getComputedStyle(c._node).width,10),c._startHeight=parseInt(document.defaultView.getComputedStyle(c._node).height,10),c._leftPosition=e.clientX-t,c._topPosition=e.clientY-n,document.documentElement.addEventListener("mousemove",c.dragMove),document.documentElement.addEventListener("mouseup",c.stopDrag)},this.dblClickHandler=function(){if(c._isFullScreen)e(c._node.style,c._prevScreenState),c._isFullScreen=!1;else{var t=c._node.style,n=t.width,r=t.height,a=t.top,i=t.left;c._prevScreenState={width:n,height:r,top:a,left:i};e(c._node.style,{width:"100%",height:"100%",top:0,left:0}),c._isFullScreen=!0}c._view.emitInside({type:o.Y})},this.dragMove=function(e){var t=e.clientY-c._topPosition,n=c._windowHeight-c._startHeight/2,r=e.clientX-c._leftPosition,a=c._windowWidth-c._startWidth/2,o=0-c._startWidth/2,i=c.getAvailablePosition(t,0,n),s=c.getAvailablePosition(r,o,a);c._node.style.top=i+"px",c._node.style.left=s+"px"},this.getAvailablePosition=function(e,t,n){return e<=t?t:e>t&&e<=n?e:n},this.resizeLeftEdge=function(e){var t=c._startWidth+c._startX-e.clientX;t<=c.minWidth?c._node.style.width=c.minWidth+"px":(c._node.style.width=t+"px",c._node.style.left=e.clientX+"px")},this.resizeRightEdge=function(e){var t=c._startWidth+e.clientX-c._startX;c._node.style.width=(t<=c.minWidth?c.minWidth:t)+"px"},this.resizeTopEdge=function(e){var t=c._startHeight+c._startY-e.clientY;t<=c.minHeight?c._node.style.height=c.minHeight+"px":(c._node.style.height=t+"px",c._node.style.top=e.clientY+"px")},this.resizeBottomEdge=function(e){var t=c._startHeight+e.clientY-c._startY;c._node.style.height=(t<=c.minHeight?c.minHeight:t)+"px"},this.resizeRightTopEdge=function(e){c.resizeRightEdge(e),c.resizeTopEdge(e)},this.resizeLeftTopEdge=function(e){c.resizeLeftEdge(e),c.resizeTopEdge(e)},this.resizeRightBottomEdge=function(e){c.resizeRightEdge(e),c.resizeBottomEdge(e)},this.resizeLeftBottomEdge=function(e){c.resizeLeftEdge(e),c.resizeBottomEdge(e)},this.findChildIframes=function(){c._iframes=[].concat(c._node.querySelectorAll("iframe"))},this.changeVisibilityChildIframes=function(t){var n=t;c._iframes.forEach((function(t){e(t.style||{},{pointerEvents:n})}))},this.stopResize=function(){c.changeVisibilityChildIframes("auto"),c._mouseMoveHandlerNames.forEach((function(e){document.documentElement.removeEventListener("mousemove",c[e])}))},this.stopDrag=function(){c.changeVisibilityChildIframes("auto"),document.documentElement.removeEventListener("mousemove",c.dragMove)},this._view=t,this._node=t._wmBotContainer,this.minWidth=u(n,"minWidth"),this.minHeight=u(n,"minHeight"),this.isMobileBrowser=a.a,this.globalConfig=n,this._mouseMoveHandlerNames=[],this._isFullScreen=!1,this._prevScreenState={},this.initialize()}}).call(this,n(14).assign,n(14).entries)},322:function(e,t,n){"use strict";var r,a=(r=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)));t.a=a},35:function(e,t,n){"use strict";var r=n(2),a=n(10),o=n(17);t.a={error:function(e,t){o.a.isCanceled(e)||Object(a.c)({type:r.ib,payload:{error:e,clientRelated:t}})}}},36:function(e,t,n){"use strict";(function(e,r,a,o){n.d(t,"h",(function(){return _})),n.d(t,"a",(function(){return M})),n.d(t,"c",(function(){return B})),n.d(t,"b",(function(){return E})),n.d(t,"e",(function(){return U})),n.d(t,"g",(function(){return G})),n.d(t,"f",(function(){return J})),n.d(t,"d",(function(){return K}));var i,s=n(6),c=n.n(s),u=n(17),d=n(10),l=n(136),p=n(35),f=n(2),v=n(24),b=n(120),g=n(62),h=n(45),m=n(22),y=n(25),w=n(12),x=n(27),I=n(1),k=n(13),O=n(299),j=(n(155),n(46));function C(){return(C=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function S(e,t,n,a,o,i,s){try{var c=e[i](s),u=c.value}catch(e){return void n(e)}c.done?t(u):r.resolve(u).then(a,o)}function T(e){return function(){var t=this,n=arguments;return new r((function(r,a){var o=e.apply(t,n);function i(e){S(o,r,a,i,s,"next",e)}function s(e){S(o,r,a,i,s,"throw",e)}i(void 0)}))}}var N=function(e){return e.reduce((function(e,t){var n=t.text,r=t.options;if(c()(r,"isSeparator"))return e;var a=n;return c()(r,"isRichMessage")&&(a=Object(w.r)(n)),[].concat(e,[{text:a,options:{isUserMessage:r.isUserMessage,timestamp:r.timestamp}}])}),[])},_=function(e){return function(t){t({type:f.kb,payload:{nodeId:e}})}},M=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=null),function(r,a){var o=a().analytics.searchTerm;r({type:f.n,payload:{conversation:e,byKeyword:o}}),t&&r(Object(g.b)(n))}},B=function(e){return{type:f.H,payload:{node:e,incrementCounter:Boolean(e)}}},E=function(e,t,n){return void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===n&&(n=!0),function(){var r=T(a.mark((function r(o,i){var s,c,u,d;return a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=i(),c=s.settings,u=c.doneText,d=c.separatorCompletedText,o(Object(m.a)(!1)),o(Object(m.c)(!1)),e&&(o(Object(v.b)(d||I.n.separatorCompletedText)),o(Object(v.a)(u||I.n.doneText))),r.next=6,o(Object(g.c)(t));case 6:o(n?Object(y.f)():Object(y.a)()),o({type:f.x});case 8:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},A=function(e,t){var n=t.id,r=t.name,a=t.type,o=e.conversation,i=o.picked,s=o.conversationStarted,c=o.conversationLength,u=e.settings,d=u.botId,l=u.name,p=e.dialog;return{oId:i.id,oName:i.name,pId:p.id,aAppType:a,aoId:n,aoName:r,seekTime:Object(w.d)(s),total:c,type:"actionBotConversation",owName:l,pInit:{id:d,type:k.h.actionBot,appType:"actionBotBot"}}},U=function(){return function(){var e=T(a.mark((function e(t,n){var r,o,i,s,u,l,p,v,b,g,h;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),o=r.settings,i=o.botId,s=o.liveChat.enabledGlobal,u=r.conversation.picked,l=r.dialog,p=r.messages,v=r.suggestions,e.prev=1,s){e.next=4;break}throw new Error("LIVE_CHAT isn't enabled globally but tried to initiate session");case 4:return b=c()(u,"id"),g=c()(l,"id"),h={app:f.R},e.next=9,Object(d.c)({type:f.yb,payload:{settings:h,options:{conversationId:b,botId:i,dialogId:g},chatHistory:N(p)}});case 9:e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(1),t({type:f.t}),t(Object(y.d)(v.items.filter((function(e){return e.id!==I.w})))),new Error("Action type LIVE_CHAT failed.");case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()},D=function(e){return function(){var t=T(a.mark((function t(n,r){var o,i,s,c,u,l,p,f,b;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.id,i=e.nextConversationNodeId,s=e.textSettings,c=e.data,u=e.text,l=r(),p=l.settings.botId,f=s?Object(x.a)(s,c,l.settings):u,n(Object(m.a)(!0)),t.next=7,Object(w.o)(f);case 7:if(b=t.sent,n(Object(v.a)(b,{id:o,isUserMessage:!1,success:!0,isRichMessage:!0})),i){t.next=16;break}return Object(d.b)(I.d.conversationEnded,C({},A(l,e),{reason:1})),t.next=13,n(E());case 13:n(Object(h.c)({botId:p,isInitialBotLoading:!1,isStartOver:!1,needsToBeShown:!1})),t.next=17;break;case 16:n(Object(v.c)(i));case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},F=function(e){return function(){var t=T(a.mark((function t(n,r){var o,i,s,c;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=r(),i=e.id,s=o.conversation.picked.isForm,c=o.dialog.id,n(Object(v.a)("",{id:i,isUserMessage:!1,success:!0,isRichMessage:!0,dialogId:c},s));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},P=function(e){return function(){var t=T(a.mark((function t(n,r){var o,i,s,c,u,d,l,p,f,b,g;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r(),i=e.id,s=e.textSettings,c=e.data,u=e.text,d=e.dataType,l=e.suggestions,p=s?Object(x.a)(s,c,o.settings):u,t.next=5,Object(w.o)(p);case 5:f=t.sent,e&&e.isInvisible&&e.autoDataSource?(b=o.settings&&o.settings.walkmeEndUserId,n(Object(v.g)(b,!0))):n(Object(v.a)(f,{id:i,isUserMessage:!1,success:!0,isRichMessage:!0})),g=Object(y.b)(e,l),n(Object(m.a)(!1)),n(Object(y.d)(g)),d===I.E&&l.length===I.A&&n(Object(y.c)(i)),n(Object(m.b)(!0));case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},W=function(t,n){var r=Object.keys(t).reduce((function(e,r){var a,o=t[r],i=n[r];return o&&i?C({},e,((a={})[o]=i,a)):e}),{});return e({},r)},z=function(){var e=T(a.mark((function e(t){var n,r,o,i,s,c,d;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.picked,r=t.dialog,o=t.dataMapping,i={},s=r.data,c={},n.clientSideMode){e.next=9;break}return e.next=7,u.a.getDialog(r.botId,r.conversationId,r.id);case 7:d=e.sent,c=d.data.data;case 9:return Object.keys(s).forEach((function(e){var t=n.nodes.find((function(t){return""+t.id==""+e})),r=s[e];t.dataType===I.C.connection_salesforce&&(r=c[e]?c[e].value:r),i[e]={type:t.dataType,settings:{},value:r,nodeId:e,name:t.name}})),e.abrupt("return",W(o,i));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=T(a.mark((function e(t){var n,r,i,s,c,d,l,p,f,v,b;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.botId,r=t.conversationId,i=t.dialogId,s=t.clientSideMode,c=t.dialog,d=t.app,l=t.dataMapping,p={},!O.a.includes(d)){e.next=14;break}if(f={},!s){e.next=8;break}f=c.data,e.next=12;break;case 8:return e.next=10,u.a.getDialog(n,r,i);case 10:v=e.sent,f=v.data.data;case 12:b=o(f).reduce((function(e,t){var n,r=t[0],a=t[1];return a&&a.type===I.z.variable?"object"==typeof a.value?C({},e,o(a.value).reduce((function(e,t){var n,a=t[0],o=t[1];return C({},e,((n={})[a]={value:o,nodeId:Number(r)},n))}),{})):e:C({},e,((n={})[r]=C({},a,{nodeId:Number(r)}),n))}),{}),p=W(l,b);case 14:return e.abrupt("return",p);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=T(a.mark((function e(t){var n,r,o,i,s,c,u,d;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.botId,r=t.conversationId,o=t.dialogId,i=t.clientSideMode,s=t.picked,c=t.dialog,u=t.app,d=t.dataMapping,!s||!s.isForm){e.next=3;break}return e.abrupt("return",z({picked:s,dialog:c,dataMapping:d}));case 3:return e.abrupt("return",L({botId:n,conversationId:r,dialogId:o,clientSideMode:i,dialog:c,app:u,dataMapping:d}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=((i={})[f.zb]=function(e){return function(){var t=T(a.mark((function t(n,r){var o,i,s,c,u,l,p,f,b,g,h,m,y,x,k;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.id,i=e.name,s=e.settings,c=e.type,u=e.nextConversationNodeId,l=e.success,p=e.isConversationEnd,f=s.mandatory,b=s.errorMessage,g=r(),h=g.conversation.picked,m=g.dialog,y=!f||f&&l,Object(d.b)(I.d.conversationActionTriggered,{type:"actionBotNode",oId:o,oName:i,owId:h.id,owType:"actionBotConversation",owName:h.name,pId:m.id,aType:"webhooksDestination",aAppType:c,aoId:s.id,reason:y?1:2},{skipPInit:!0}),x=C({},A(g,e),{aType:"webhooksDestination",oIsWithAction:!0,wId:s.id}),!y){t.next=22;break}if(!p){t.next=13;break}return Object(d.b)(I.d.conversationEnded,C({},x,{reason:1})),t.abrupt("return",n(E(!0)));case 13:if(p||!u){t.next=17;break}n(Object(v.c)(u)),t.next=20;break;case 17:return Object(d.b)(I.d.conversationEnded,C({},x,{reason:4})),n(Object(v.a)(I.m,{isUserMessage:!1,success:!1})),t.abrupt("return",n(E()));case 20:t.next=30;break;case 22:if(Object(d.b)(I.d.conversationEnded,C({},x,{reason:4})),k=I.m,!b){t.next=28;break}return t.next=27,Object(w.o)(b);case 27:k=t.sent;case 28:return n(Object(v.a)(k,{isUserMessage:!1,success:!1})),t.abrupt("return",n(E()));case 30:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},i[f.R]=function(e){return function(){var t=T(a.mark((function t(n,r){var o,i,s,c,u,l,f,b,g,h,m;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.id,i=e.name,s=e.settings,c=e.type,u=e.nextConversationNodeId,l=e.isConversationEnd,f=r(),b=f.settings.additionalSettings,g=f.conversation.picked,h=f.dialog,Object(d.b)(I.d.conversationActionTriggered,{type:"actionBotNode",oId:o,oName:i,owId:g.id,owType:"actionBotConversation",owName:g.name,pId:h.id,aType:"liveChat",aAppType:c},{skipPInit:!0}),m=C({},A(f,e),{aType:"liveChat",oIsWithAction:!0,wId:s.id}),t.prev=5,t.next=8,n(U());case 8:if(!l){t.next=13;break}return Object(d.b)(I.d.conversationEnded,C({},m,{reason:1})),t.abrupt("return",n(E(!0,!b.playMode)));case 13:if(l||!u){t.next=17;break}n(Object(v.c)(u)),t.next=20;break;case 17:return Object(d.b)(I.d.conversationEnded,C({},m,{reason:4})),n(Object(v.a)(I.m,{isUserMessage:!1,success:!1})),t.abrupt("return",n(E()));case 20:t.next=29;break;case 22:return t.prev=22,t.t0=t.catch(5),p.a.error(t.t0,!0),n(Object(v.a)(I.m,{isUserMessage:!1,success:!1})),t.next=28,n(E());case 28:Object(d.b)(I.d.conversationEnded,C({},m,{reason:4}));case 29:case"end":return t.stop()}}),t,null,[[5,22]])})));return function(e,n){return t.apply(this,arguments)}}()},i[f.p]=function(e){return function(){var t=T(a.mark((function t(n,r){var i,s,c,u,l,b,g,h,m,y,w,x,k;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.settings,s=e.type,c=e.id,u=i.id,l=i.app,b=r(),g=b.conversation.picked,h=b.dialog,m=l===I.a.actionBotConversation?e.dataMapping:null,(g.clientSideMode||g.isForm)&&m&&(y={},o(m).forEach((function(e){var t=e[0],n=e[1],r={value:h.data[t],settings:{},type:"text"};y[n]=g.isForm&&!g.clientSideMode?r:h.data[t]})),m=y),"actionBotConversation",w=b.settings.allConversations.find((function(e){return e.id===u})),Object(d.b)(I.d.conversationActionTriggered,{type:"actionBotNode",oId:c,oName:name,owId:g.id,owType:"actionBotConversation",owName:g.name,pId:h.id,aType:"actionBotConversation",aAppType:s,aoId:i.id},{skipPInit:!0}),x=C({},A(b,e),{aType:"actionBotConversation",oIsWithAction:!0,wId:i.id}),!w){t.next=15;break}return Object(d.b)(I.d.conversationEnded,C({},x,{reason:1})),t.next=14,n(E(!1,!1,!1));case 14:return t.abrupt("return",n(M(w,!0,m)));case 15:return(k=b.settings.additionalSettings).playMode&&"conversation"===k.previewEntityType&&Object(d.c)({type:f.yb,payload:{settings:i}}),p.a.error(new Error("Bot tried to launch Conversation which is not present in its conversation list."),!0),Object(d.b)(I.d.conversationEnded,C({},x,{reason:4})),n(Object(v.a)(I.m,{isUserMessage:!1,success:!1})),t.abrupt("return",n(E()));case 21:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},i),q=function(e){return function(){var t=T(a.mark((function t(n,r){var o,i,s,u,l,b,g,y,x,k,O,S,T,_,M,B,U,D,F,P,W,z,L,q,V,G,J,K,Q,Y,X,Z,$,ee,te;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.id,i=e.name,s=e.type,u=e.actionType,l=e.settings,b=e.dataMapping,g=e.isConversationEnd,y=e.nextConversationNodeId,x=r(),k=x.settings,O=k.botId,S=k.additionalSettings,T=k.globalConfig,_=k.jwt,M=k.isWorkstation,B=x.conversation.picked,U=x.dialog,D=x.messages,F=c()(l,"app",""),P=c()(l,"waitForActionEnds",!1),W=j.a.isPrivateConversation(),z=[f.rb,f.qb,f.pb].includes(F),L=z&&!e.hasOwnProperty("isConversationEnd")&&null===y,q=[f.zb,f.p,f.R,f.sb],V=l&&l.app===f.Ab,G=l&&l.app===f.sb,J=!S.playMode&&!q.includes(F)&&!(V&&!l.destinationUrl)&&c()(T,"closeOnAction",!0)&&(g||L),!V||!l.destinationUrl){t.next=17;break}return t.next=16,Object(w.c)(l.destinationUrl);case 16:K=t.sent;case 17:if(J&&Object(d.c)({type:f.i}),O){t.next=20;break}return t.abrupt("return");case 20:if("WalkMe"===u){t.next=22;break}throw new Error("Unknown action type: "+u);case 22:return Q=B.id,Y=U.id,X=N(D),t.next=27,R({botId:O,conversationId:Q,dialogId:Y,clientSideMode:W,picked:B,dialog:U,app:F,dataMapping:b});case 27:if(Z=t.sent,!H[F]){t.next=31;break}return n(Object(m.a)(!0)),t.abrupt("return",n(H[F](e)));case 31:if(!g&&!L){t.next=39;break}return $=V&&!l.destinationUrl,ee=!(M||$||G)&&!P,t.next=36,n(E(!0,ee));case 36:n(Object(h.c)({botId:O,isInitialBotLoading:!1,isStartOver:!1,needsToBeShown:!1})),Object(d.b)(I.d.conversationActionTriggered,{type:"actionBotNode",oId:o,oName:i,owId:B.id,owType:"actionBotConversation",owName:B.name,pId:U.id,aType:"bizFlow",aAppType:s,aoId:l.id},{skipPInit:!0}),Object(d.b)(I.d.conversationEnded,C({},A(x,e),{aType:"bizFlow",pId:Y,oIsWithAction:!0,wId:l.id,reason:1}));case 39:if(te={type:f.yb,payload:{settings:l,answers:Z,chatHistory:X,options:{conversationId:Q,botId:O,dialogId:Y,nodeId:o,jwt:_}}},K&&(te.payload.options.bbCodes=JSON.stringify(K)),!P||S.playMode){t.next=50;break}return n(Object(m.a)(!0)),Object(d.c)({type:f.i}),t.next=46,Object(d.c)(te);case 46:Object(d.c)({type:f.j}),n(Object(m.a)(!1)),t.next=51;break;case 50:Object(d.c)(te);case 51:y&&n(Object(v.c)(y)),t.next=57;break;case 54:t.prev=54,t.t0=t.catch(0),p.a.error(t.t0);case 57:case"end":return t.stop()}}),t,null,[[0,54]])})));return function(e,n){return t.apply(this,arguments)}}()};function V(e,t){return!(!e||!e.isForm)&&[I.i.question,I.i.condition].includes(e.nodes.find((function(e){return e.id===t})).type)}var G=function(e,t){return function(){var n=T(a.mark((function n(r,o){var i,s,c,u,l,p,f,v,b,g;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=e.id,c=e.type,u=e.name,l=e.settings,p=o(),f=p.conversation.picked,(!(v=p.dialog)||v.id===t)&&f&&v){n.next=5;break}return n.abrupt("return");case 5:return Object(d.b)(I.d.conversationsNodeServed,C({type:"actionBotNode",oId:s,oName:u,owId:f.id,owType:"actionBotConversation",owName:f.name,pId:v.id,aAppType:c},c===I.i.action&&{aoId:l.id}),{skipPInit:!0}),b=f.isForm&&V(f,s)?I.i.form:c,(i={})[I.i.message]=D,i[I.i.question]=P,i[I.i.action]=q,i[I.i.form]=F,g=i,n.abrupt("return",g[b]&&r(g[b](e)));case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},J=function(e){return function(){var t=T(a.mark((function t(n,r){var o,i,s,c,u,d;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r(),i=o.conversation.picked.nodes,s=o.dialog.id,c=i.find((function(t){return t.id===e})),u=c.nextConversationNodeId){t.next=5;break}return t.abrupt("return");case 5:if(d=i.find((function(e){return e.id===u})),j.a.isPrivateConversation()){t.next=10;break}return t.next=10,Object(v.d)(n,r,u);case 10:return t.next=12,G(d,s)(n,r);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},K=function(){return function(){var e=T(a.mark((function e(t,n){var r,o,i,s,p,f,v,g,h,y,x,O,S,T,N,_,M,E,A,U,D,F,P,W,z,L,R,H,q,V,J;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=n(),o=r.conversation,i=r.settings,s=i.botId,p=i.name,f=i.conversationsNodesMap,v=r.dialog,g=o.picked,h=o.byKeyword,g&&s&&v){e.next=5;break}return e.abrupt("return");case 5:if(y=v.id,x=g.id,O=new Date,S=j.a.isPrivateConversation(),T=c()(g,I.u,!1),!S&&!T){e.next=16;break}_=c()(f,[x,"entryPointId"]),(N=c()(f,[x,"nodesMap",_])).data=v.data||{},e.next=59;break;case 16:return t(Object(m.a)(!0)),e.prev=17,e.next=20,u.a.getFirstConversationNode(s,x,y);case 20:M=e.sent,E=M.data,N=E,e.next=59;break;case 25:if(e.prev=25,e.t0=e.catch(17),"INSUFFICIENT_DATA"!==c()(e.t0,["response","data","reason","bbCodes"])){e.next=46;break}A=c()(e.t0,["response","data","data","bbCodes"],[]),U=A.reduce((function(e,t){var n;return C({},e,((n={})[t]="",n))}),{}),D=0,F=Object.keys(U);case 31:if(!(D<F.length)){e.next=39;break}return P=F[D],e.next=35,Object(w.o)(P);case 35:U[P]=e.sent;case 36:D++,e.next=31;break;case 39:return e.next=41,u.a.getFirstConversationNode(s,x,y,{bbCodes:U});case 41:W=e.sent,z=W.data,N=z,e.next=59;break;case 46:if("INSUFFICIENT_DATA"!==c()(e.t0,["response","data","reason","tagConditions"])){e.next=58;break}return L=c()(e.t0,["response","data","data","tagConditions"],[]),e.next=50,l.a.getConditionsFlatDataByTagConditions(L);case 50:return R=e.sent,e.next=53,u.a.getFirstConversationNode(s,x,y,{conditionsFlatData:R});case 53:H=e.sent,q=H.data,N=q,e.next=59;break;case 58:throw e.t0;case 59:if(!Object(w.k)(n(),s)){e.next=61;break}return e.abrupt("return");case 61:if(!N){e.next=73;break}if(V=N.aDelay,!((J=Object(w.e)(V,O))>0)){e.next=67;break}return e.next=67,Object(w.b)(J);case 67:if(n().dialog===v){e.next=70;break}return e.abrupt("return");case 70:Object(d.b)(I.d.conversationStarted,C({type:"actionBotConversation",oId:g.id,oName:g.name,owName:p,pId:y,pInit:{id:s,type:k.h.actionBot,appType:"actionBotBot"}},h?{value:h}:null)),t(B(N)),t(G(N,y));case 73:e.next=78;break;case 75:e.prev=75,e.t1=e.catch(0),t(Object(b.a)(e.t1));case 78:case"end":return e.stop()}}),e,null,[[0,75],[17,25]])})));return function(t,n){return e.apply(this,arguments)}}()}}).call(this,n(14).assign,n(33).Promise,n(42),n(14).entries)},40:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return v}));var a=n(122),o=n(266),i=n(270),s=n(309),c=n(35);function u(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}var d=a.c,l=function(){return function(t){return function(){var n,a=(n=r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t(n));case 4:e.prev=4,e.t0=e.catch(0),c.a.error(e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})),function(){var t=this,r=arguments;return new e((function(e,a){var o=n.apply(t,r);function i(t){u(o,e,a,i,s,"next",t)}function s(t){u(o,e,a,i,s,"throw",t)}i(void 0)}))});return function(e){return a.apply(this,arguments)}}()}},p=null,f=null,v=function(){return null===p&&(p=null!==f?Object(a.d)(i.a,f,d(Object(a.a)(o.a,l))):Object(a.d)(i.a,d(Object(a.a)(o.a,l))),Object(s.a)(p)),p}}).call(this,n(33).Promise,n(42))},440:function(e,t){},45:function(e,t,n){"use strict";(function(e,r,a){n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return T})),n.d(t,"d",(function(){return N})),n.d(t,"e",(function(){return _}));var o=n(6),i=n.n(o),s=n(17),c=n(72),u=n(10),d=n(35),l=n(12),p=n(27),f=n(2),v=n(62),b=n(22),g=n(25),h=n(36);function m(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}function y(t){return function(){var n=this,r=arguments;return new e((function(e,a){var o=t.apply(n,r);function i(t){m(o,e,a,i,s,"next",t)}function s(t){m(o,e,a,i,s,"throw",t)}i(void 0)}))}}function w(){return(w=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var x=function(e,t){return void 0===t&&(t=!0),{type:f.G,payload:{settings:e,addInitialMessageToChat:t}}},I=function(e){return{type:f.F,payload:{error:e}}},k=function(e){return{type:f.E,payload:{conversations:e}}},O=function(e){return e?["initialMessages","doneText","noConversationsOneSearchItemFoundText","noMatchedConversationErrorMessages","severalConversationsFoundText"].reduce((function(t,n){var r;return e.hasOwnProperty(n)?w({},t,((r={})[n]=e[n],r)):t}),{}):{}},j=function(){var e=y(a.mark((function e(t){var n,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",t);case 2:return n=O(t),e.next=5,Object(l.o)(JSON.stringify(n));case 5:return r=e.sent,e.prev=6,e.abrupt("return",JSON.parse(r));case 10:return e.prev=10,e.t0=e.catch(6),d.a.error(e.t0,!0),e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,null,[[6,10]])})));return function(t){return e.apply(this,arguments)}}(),C=function(t){var n=t.botId,o=t.isInitialBotLoading,m=void 0!==o&&o,O=t.isStartOver,C=void 0!==O&&O,S=t.needsToBeShown,T=void 0===S||S;return function(){var t=y(a.mark((function t(o,y){var O,S,N,_,M,B,E,A,U,D,F,P,W,z,L,R,H,q,V,G,J,K,Q,Y,X;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.a.setNewCancelToken(),(m||C)&&o(Object(b.a)(!0)),m||o({type:f.cb}),t.prev=3,t.next=6,e.all([s.a.fetchBotData(n),s.a.getConversations(n)]);case 6:return O=t.sent,S=O[0],N=O[1],t.next=11,j(S.data);case 11:if(_=t.sent,r(S.data,w({},_)),!S.data.hasOwnProperty("initialMessages")){t.next=17;break}return t.next=16,e.all(S.data.initialMessages.map((function(e){return Object(l.o)(e)})));case 16:S.data.initialMessages=t.sent;case 17:if(!S.data.initialMessagesTextSettings||S.data.initialMessages.length!==S.data.initialMessagesTextSettings.length){t.next=21;break}return t.next=20,e.all(S.data.initialMessagesTextSettings.map((function(e,t){return e?Object(l.o)(Object(p.a)(e)):S.data.initialMessages[t]})));case 20:S.data.initialMessages=t.sent;case 21:if(M=y(),!Object(l.k)(M,n)){t.next=24;break}return t.abrupt("return");case 24:return B=M.settings.conversationId,t.next=27,Object(c.a)(N.data);case 27:if(E=t.sent,o((Z=E,{type:f.C,payload:{allConversations:Z}})),A=i()(M,["settings","additionalSettings"],{}),U=A.playMode,D=A.previewEntityType,!B){t.next=43;break}return t.prev=32,t.next=35,s.a.getConversation(n,B);case 35:P=t.sent,W=P.data,U?E=[W]:F=W,t.next=43;break;case 40:t.prev=40,t.t0=t.catch(32),F=null;case 43:if(z=i()(S,["data","botCustomStyles"],[]).find((function(e){return e.active})),L=i()(z,"css",""),m?Object(l.a)(L):T&&Object(u.c)({type:f.j}),o(k(E)),!m||U){t.next=51;break}if(!F){t.next=50;break}return t.abrupt("return",o(Object(v.f)(S.data,E,F)));case 50:return t.abrupt("return",o(Object(v.f)(S.data,E)));case 51:if(R=1===E.length,H=U&&"bot"===D,q=C&&!R||H&&(C||m),V=i()(M,["settings","singleConversationPlayed"],!1),o(x(S.data,q)),G=S.data,J=G.isWalkMeSearchEnabled,K=G.isWalkMeSearchItemsSuggestedInitially,Q=[],!J||!K){t.next=63;break}return t.next=61,o(Object(g.g)());case 61:Y=t.sent,Q=i()(Y,["payload","wmSearchItems"],[]);case 63:!R||Q.length||H||V&&!C&&!m?(o(Object(g.f)(S.data.suggestedConversations,E)),o(Object(b.a)(!1))):o(Object(h.a)(E[0],!0)),t.next=76;break;case 66:if(t.prev=66,t.t1=t.catch(3),!s.a.isCanceled(t.t1)){t.next=70;break}return t.abrupt("return");case 70:Object(u.c)({type:f.M}),X=i()(t.t1,["response","data"],{}),i()(t.t1,["config","url"],"").includes("conversations")?o((a=X,{type:f.D,payload:{error:a}})):o(I(X)),o(Object(b.a)(!1)),d.a.error(t.t1,!1);case 76:case"end":return t.stop()}var a,Z}),t,null,[[3,66],[32,40]])})));return function(e,n){return t.apply(this,arguments)}}()},S=function(e,t,n,r,a,o){return Object(u.c)({type:f.P,payload:{uuid:t}}),{type:f.P,payload:{jwt:e,uuid:t,siteConfig:n,globalConfig:r,featureFlags:a,salesforce:o}}},T=function(e,t,n,r,o,c){return function(){var l=y(a.mark((function l(p){var v,b,g,h,m,y;return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,s.a.fetchJWT(w({clientSideSFOauth:c,userGuid:e,walkmeEndUserId:t},n&&{uuid:n}));case 3:v=a.sent,b=v.data,g=b.jwt,h=b.uuid,m=b.sfUserTokenValid,g&&h&&p(S(g,h,r,o,{clientSideSFOauth:c},{sfUserTokenValid:m})),a.next=16;break;case 11:a.prev=11,a.t0=a.catch(0),y=i()(a.t0,["response","data"]),p((l=y,Object(u.c)({type:f.O}),{type:f.O,payload:{error:l}})),d.a.error(a.t0);case 16:case"end":return a.stop()}var l}),l,null,[[0,11]])})));return function(e){return l.apply(this,arguments)}}()},N=function(){return function(e){s.a.logoutSalesforce(),e({type:f.S})}},_=function(){return{type:f.hb}}}).call(this,n(33).Promise,n(14).assign,n(42))},46:function(e,t,n){"use strict";(function(e,r,a){var o=n(6),i=n.n(o),s=n(84),c=n(311),u=n.n(c),d=n(107),l=n.n(d),p=n(267),f=n.n(p),v=n(314),b=n.n(v),g=n(169),h=n(17),m=n(2),y=n(1),w=n(40);function x(){return(x=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e,t,n,a,o,i,s){try{var c=e[i](s),u=c.value}catch(e){return void n(e)}c.done?t(u):r.resolve(u).then(a,o)}function k(e){return function(){var t=this,n=arguments;return new r((function(r,a){var o=e.apply(t,n);function i(e){I(o,r,a,i,s,"next",e)}function s(e){I(o,r,a,i,s,"throw",e)}i(void 0)}))}}l.a.add_operation("Date",Date);var O={date:function(e,t){var n=(void 0===t?{}:t).utcOffset;if(!(e instanceof Date)&&Number.isNaN(Date.parse(e)))return e;if(f()(n))throw new Error("utcOffset is mandatory");if("number"!=typeof n)throw new Error("utcOffset should be a number");return Object(g.default)(new Date(e),n).toString()}},j=function(e,t){return(0,u()()(t.dataType).execute)(e,t)},C=function(){var t=k(a.mark((function t(n,r,o){var i,c,u,d,p,v,g,m,w,I,k,C,S,T,N,_;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r?JSON.parse(JSON.stringify(r)):r,c=i.nextConversationNodeId,u=n.text,d=n.nodeId,p=n.botId,v=n.conversationId,g={success:!0,text:u,id:d,dialogId:o.id,errorMessage:null,dataType:i.dataType,createdAt:(new Date).toISOString()},t.prev=4,w=Object(s.getDialogFlatData)(o),!(i=Object(s.replaceSuggestionsKeys)(i,w)).isSuggestionsOnly||y.h.hasOwnProperty(i.dataType)||i.suggestions.includes(u)){t.next=9;break}throw new Error("An answer should be only from suggestions",{errorData:{code:"BAD_REQUEST",message:"An answer should be only from suggestions",reason:{text:"WRONG_DATA"}}});case 9:if(i.isSplitConversation&&null!==i.nextConversationBranchNodes&&1===(c=i.nextConversationBranchNodes[u])&&(c=null),!y.h.hasOwnProperty(i.dataType)){t.next=19;break}return t.next=13,h.a.postConnectionMessage({botId:p,conversationId:v,nodeId:d,text:u,dialog:o});case 13:k=t.sent,C=k.data,I=C.data,e(g,{data:I}),t.next=23;break;case 19:I=j(u,i),S={utcOffset:(new Date).getTimezoneOffset()},O.hasOwnProperty(i.dataType)&&(I=O[i.dataType](I,S)),e(g,{data:I});case 23:T=b()(o.data,((m={})[i.id]={value:I,settings:i.settings,type:i.dataType},m)),w=Object(s.getDialogFlatData)(x({},o,{data:T})),f()(I)?(c=null,g.success=!1,g.errorMessage=i.errorMessage,g.errorType="extraction"):(N=i.validations,(_=(void 0===N?[]:N).find((function(e){var t=e.condition.logic;return!l.a.apply(t,w)})))&&(c=null,g.success=!1,g.errorMessage=_.error,g.errorType="validation")),g.success&&e(g,{nextConversationNodeId:c,success:!0,id:d}),t.next=32;break;case 29:return t.prev=29,t.t0=t.catch(4),t.abrupt("return",{data:e(g,{nextConversationNodeId:c,success:!1,id:d,errorMessage:t.t0.message})});case 32:return t.abrupt("return",{data:g});case 33:case"end":return t.stop()}}),t,null,[[4,29]])})));return function(e,n,r){return t.apply(this,arguments)}}(),S=function(){var t=k(a.mark((function t(n){var r,o,i,s,c,u,d,l,p,f,v,b,g;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.node,o=n.botId,i=n.conversationId,s=n.dialog,c={node:r,dialog:null},r){t.next=4;break}return t.abrupt("return",c);case 4:if(u=r.type,d=r.settings,l=r.id,p=r.dataType,u!==y.i.question||!y.h.hasOwnProperty(p)){t.next=16;break}return t.prev=6,t.next=9,h.a.postNode({botId:o,conversationId:i,nodeId:l,dialog:s});case 9:f=t.sent,v=f.data,e(c,{node:v.node}),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(6);case 16:if(u!==y.i.action||d.app!==m.zb){t.next=27;break}return t.prev=17,t.next=20,h.a.postNode({botId:o,conversationId:i,nodeId:l,dialog:s});case 20:b=t.sent,g=b.data,e(c,{node:g.node,dialog:g.dialog}),t.next=27;break;case 25:t.prev=25,t.t1=t.catch(17);case 27:return t.abrupt("return",c);case 28:case"end":return t.stop()}}),t,null,[[6,14],[17,25]])})));return function(e){return t.apply(this,arguments)}}();t.a={createLocalDialog:function(e){var t=e.botId,n=e.conversationId,r=e.envId,a=e.dataMapping;return{id:(new Date).getTime(),dataKeysSequence:[],data:a||{},botId:t,conversationId:n,envId:r}},getMessageData:function(e,t,n){var r,a=n.conversationId,o=n.nodeId,s=i()(e,["settings","conversationsNodesMap",a,"nodesMap",o]);return s?((r={})[o]={type:s.dataType,value:t.data,settings:s.settings||{}},r):null},isPrivateConversation:function(e){var t=e?e():Object(w.a)().getState(),n=t.settings,r=t.conversation;return r&&r.picked&&r.picked[y.g]||n&&n[y.g]||!1},processConversationNode:S,sendUserMessage:C,validateAnswer:j}}).call(this,n(14).assign,n(33).Promise,n(42))},62:function(e,t,n){"use strict";(function(e,r,a){n.d(t,"b",(function(){return T})),n.d(t,"a",(function(){return N})),n.d(t,"e",(function(){return M})),n.d(t,"f",(function(){return B})),n.d(t,"d",(function(){return A})),n.d(t,"c",(function(){return U}));var o=n(6),i=n.n(o),s=n(2),c=n(17),u=n(46),d=n(10),l=n(35),p=n(12),f=n(27),v=n(1),b=n(13),g=n(36),h=n(24),m=n(45),y=n(22),w=n(25),x=n(120);function I(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}function k(t){return function(){var n=this,r=arguments;return new e((function(e,a){var o=t.apply(n,r);function i(t){I(o,e,a,i,s,"next",t)}function s(t){I(o,e,a,i,s,"throw",t)}i(void 0)}))}}function O(){return(O=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var j=function(e,t){return void 0===t&&(t=!1),{type:s.q,payload:{dialog:O({},e,{isRestored:t})}}};function C(e,t){return S.apply(this,arguments)}function S(){return(S=k(a.mark((function e(t,n){var r,o,i,s;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.nodes.find((function(e){return e.dataType===v.C.connection_salesforce&&"Records"===e.settings.dataSource}))){e.next=3;break}return e.abrupt("return");case 3:return o=r.id,i=r.settings.account,s=t.id,e.next=8,c.a.checkSalesforceStatus({connectionId:i,conversationId:s,dialogId:n,nodeId:o});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(e){return function(){var t=k(a.mark((function t(n,o){var i,s,d,l,f,v,b,h,m,w,I;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=o(),s=i.conversation.picked,d=i.settings,l=d.botId,f=d.envId,v=d.featureFlags,b=u.a.isPrivateConversation(),l){t.next=5;break}return t.abrupt("return");case 5:if(m=r({},e),s.conversationVariables&&s.conversationVariables.conversationDataMappings.forEach((function(e){e.defaultValue&&!m[e.variableName]&&(m[e.variableName]={settings:{},type:"text",value:e.defaultValue})})),!b){t.next=11;break}h=u.a.createLocalDialog({botId:l,conversationId:s.id,envId:f,dataMapping:m}),t.next=27;break;case 11:return t.next=13,c.a.createDialog(l,s.id,m);case 13:if(w=t.sent,I=w.data,h=I,!s.isForm){t.next=27;break}if(n(Object(y.c)(!0)),t.prev=18,!v||!v.clientSideSFOauth){t.next=22;break}return t.next=22,C(s,h.id);case 22:t.next=27;break;case 24:return t.prev=24,t.t0=t.catch(18),t.abrupt("return");case 27:if(!Object(p.k)(o(),l)){t.next=29;break}return t.abrupt("return");case 29:n(j(h)),n(Object(g.d)()),t.next=36;break;case 33:t.prev=33,t.t1=t.catch(0),n(Object(x.a)(t.t1));case 36:case"end":return t.stop()}}),t,null,[[0,33],[18,24]])})));return function(e,n){return t.apply(this,arguments)}}()},N=function(e){return{type:s.r,payload:{data:e}}},_=function(e,t,n){return{type:s.gb,payload:{messages:e,defaultLabels:t,mentionData:n}}},M=function(){return function(){var e=k(a.mark((function e(t,n){var r,o,i,s,c,u,f,w;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),o=r.settings,i=o.botId,s=o.separatorNewText,c=r.conversation,u=c.picked,f=c.currentNode,(w=r.dialog)&&u&&f&&Object(d.b)(v.d.conversationEnded,{oId:u.id,oName:u.name,pId:w.id,aAppType:f.type,aoId:f.id,aoName:f.name,seekTime:Object(p.d)(r.conversation.conversationStarted),total:r.conversation.conversationLength,reason:2,type:"actionBotConversation",owName:r.settings.name,pInit:{id:i,type:b.h.actionBot,appType:"actionBotBot"}}),e.prev=3,e.next=6,t(Object(g.b)(!1,!1,!1));case 6:t(Object(m.c)({botId:i,isInitialBotLoading:!1,isStartOver:!0})),t(Object(h.b)(s||v.n.separatorNewText,!0)),t(Object(y.b)(!0)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),l.a.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}()},B=function(t,n,r){return void 0===r&&(r=null),function(){var o=k(a.mark((function o(u,b){var x,I,k,O,C,S,T,N,B,E,A,U,D,F,P,W,z,L,R,H,q,V,G,J,K,Q,Y,X,Z,$,ee,te,ne,re,ae,oe,ie,se,ce,ue;return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,x=i()(b(),["settings","conversationId"]),I=new e((function(e,n){c.a.restoreDialog(t.id,x).then((function(t){e(t)})).catch((function(e){n(e)}))})),a.next=5,I;case 5:if(k=a.sent,O=k.data,C=k.status,S=b(),!Object(p.k)(S,t.id)){a.next=11;break}return a.abrupt("return");case 11:if(204!==C){a.next=27;break}if(T=1===n.length,N=i()(S,["settings","additionalSettings"],{}),B=N.playMode,E=N.previewEntityType,A=B&&"bot"===E,U=[],!t.isWalkMeSearchEnabled||!t.isWalkMeSearchItemsSuggestedInitially){a.next=22;break}return a.next=20,u(Object(w.g)());case 20:D=a.sent,U=i()(D,["payload","wmSearchItems"],[]);case 22:return!T||U.length||A?r?(u(Object(m.a)(t,!1)),u(Object(g.a)(r))):(u(Object(m.a)(t)),u(Object(w.f)(t.suggestedConversations,n))):(F=n[0],u(Object(m.a)(t,!1)),u(Object(g.a)(F))),u(Object(y.a)(!1)),P=i()(b(),["messages","0","text"],""),Object(d.b)(v.d.chatOpened,{type:"actionBotBot",oId:t.id,oName:t.name,value:P}),a.abrupt("return");case 27:if(W=O.id,z=O.conversationId,L=O.sequence,R=O.data,!L){a.next=77;break}if(H=S.settings.conversations,q=H.find((function(e){return e.id===z})),V=L[L.length-1]||{},!q){a.next=77;break}return G=V.id,J=V.name,K=V.type,Q=V.suggestions,Y=V.dataType,X={botId:t.id,conversationId:z,data:{},id:W},Z=t.separatorTodayText,$=t.separatorYesterdayText,ee={today:Z||v.n.separatorTodayText,yesterday:$||v.n.separatorYesterdayText},u(Object(g.a)(q,!1)),u(j(X,!0)),q.isForm&&L.length>0&&(L[L.length-1].isForm=!0,L[L.length-1].form=q.form,u(Object(y.c)(!0))),a.next=42,e.all(L.map((function(e){return e.textSettings?Object(p.o)(Object(f.a)(e.textSettings,R)):e.text})));case 42:if(te=a.sent,ne=L.map((function(e,t){return e.text=te[t],e})),u(_(ne,ee,R)),u(Object(y.a)(!1)),!L.length){a.next=75;break}if(u(Object(g.c)(V)),re=V.nextConversationNodeId,K&&"message"!==K){a.next=56;break}if(!re){a.next=54;break}u(Object(h.c)(re)),a.next=56;break;case 54:return a.next=56,u(Object(g.b)());case 56:if("question"===K&&Object(p.m)(V)&&(u(Object(w.d)(Object(w.b)(V,Q))),Y===v.E&&Q.length===v.A&&u(Object(w.c)(G))),"action"!==K){a.next=73;break}return ae=i()(V,["settings","app"]),oe=i()(V,["settings","id"]),a.next=62,Object(d.c)({type:s.B,payload:{app:ae,id:oe}});case 62:if(!a.sent){a.next=72;break}if(!re){a.next=68;break}u(Object(h.c)(re)),a.next=70;break;case 68:return a.next=70,u(Object(g.b)());case 70:a.next=73;break;case 72:u(Object(g.g)(V,W));case 73:a.next=76;break;case 75:u(Object(g.d)());case 76:Object(d.b)(v.d.chatOpened,{type:"actionBotBot",oId:t.id,oName:t.name,pId:W,aType:"Restored",aAppType:K,aoId:G,aoName:J});case 77:u(Object(m.a)(t,!1)),a.next=89;break;case 80:if(a.prev=80,a.t0=a.catch(0),!c.a.isCanceled(a.t0)){a.next=84;break}return a.abrupt("return");case 84:u((o=a.t0,{type:s.fb,payload:{error:o}})),u(Object(y.a)(!1)),ie=t.conversationUnpublishedText,se=t.conversationUpdatedText,a.t0&&a.t0.message!==v.D&&(ce=i()(a.t0,["response","data","reason"],""),ue=v.m,ce?("WRONG_DATA"===ce.version&&(ue=se||v.n.conversationUpdatedText),"NOT_PUBLISHED"!==ce.published&&"WRONG_ID"!==ce.conversationId||(ue=ie||v.n.conversationUnpublishedText),"NOT_ASSIGNED"===ce.conversationId&&(ue=v.m)):l.a.error(a.t0),u(Object(h.a)(ue))),u(M());case 89:case"end":return a.stop()}var o}),o,null,[[0,80]])})));return function(e,t){return o.apply(this,arguments)}}()},E=function(e,t){return{type:s.ab,payload:{id:e,nodeId:t}}},A=function(e,t){return function(){var n=k(a.mark((function n(r,o){var d,f,b,g,m,y;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,d=o(),f=d.settings.botId,b=d.conversation.picked,g=d.dialog,m=u.a.isPrivateConversation(),y=i()(b,v.u,!1),!(f&&b&&g)){n.next=16;break}if(!m&&!y){n.next=9;break}r((x=e,{type:s.s,payload:{dataKey:x}})),n.next=11;break;case 9:return n.next=11,c.a.removeAnswer(f,b.id,g.id,e);case 11:if(!Object(p.k)(o(),f)){n.next=13;break}return n.abrupt("return");case 13:r(Object(w.a)()),r(E(e,t)),r(Object(h.c)(t));case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(0),r((a=n.t0,{type:s.Z,payload:{error:a}})),l.a.error(n.t0);case 22:case"end":return n.stop()}var a,x}),n,null,[[0,18]])})));return function(e,t){return n.apply(this,arguments)}}()},U=function(e){return void 0===e&&(e=!1),function(){var t=k(a.mark((function t(n,r){var o,f,b,g,h,m;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=r(),f=o.settings.botId,b=o.conversation.picked,g=o.dialog,h=u.a.isPrivateConversation(),m=i()(b,v.u,!1),!(f&&b&&g)){t.next=12;break}if(h&&m){t.next=8;break}return t.next=8,c.a.finishDialog(f,b.id,g.id);case 8:if(!Object(p.k)(r(),f)){t.next=10;break}return t.abrupt("return");case 10:n({type:s.z}),e&&(Object(d.c)({type:s.h}),n({type:s.A,payload:{isChatNeedDestroy:e}}),h||c.a.cancelAllRequests("Finishing dialog requires closing of chat window"));case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),n((a=t.t0,{type:s.y,payload:{error:a}})),l.a.error(t.t0);case 18:case"end":return t.stop()}var a}),t,null,[[0,14]])})));return function(e,n){return t.apply(this,arguments)}}()}}).call(this,n(33).Promise,n(14).assign,n(42))},72:function(e,t,n){"use strict";(function(e,r,a){n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return f}));var o=n(108),i=n(310);function s(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}function c(t){return function(){var n=this,r=arguments;return new e((function(e,a){var o=t.apply(n,r);function i(t){s(o,e,a,i,c,"next",t)}function c(t){s(o,e,a,i,c,"throw",t)}i(void 0)}))}}function u(e){return d.apply(this,arguments)}function d(){return(d=c(r.mark((function t(n){var a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.all(n.map((function(e){return o.a.evaluateTagsById(e.tagIds)})));case 2:return a=t.sent,t.abrupt("return",n.filter((function(e,t){return a[t]})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(e){var t={isCaseSensitive:!1,includeScore:!1,includeMatches:!1,minMatchCharLength:2,shouldSort:!0,findAllMatches:!1,keys:["keywords"],location:0,threshold:.25,distance:100,ignoreLocation:!0,useExtendedSearch:!0},n=o.a.getUserJsonSettings();return n&&n.actionbot&&(t=a(t,n.actionbot.fuseSearchSettings)),new i.a(e,function(e){return e.isCaseSensitive=f(e.isCaseSensitive),e.ignoreLocation=f(e.ignoreLocation),e.shouldSort=f(e.shouldSort),e.minMatchCharLength=parseInt(e.minMatchCharLength),e.threshold=parseFloat(e.threshold),e.location=parseInt(e.location),e.distance=parseInt(e.distance),e}(t))}function p(e,t){return e.search(t).map((function(e){return e.item}))}function f(e){if("boolean"==typeof e)return e;var t="string"==typeof e&&e.toLowerCase();return"true"===t||"false"!==t&&void 0}}).call(this,n(33).Promise,n(42),n(14).assign)},739:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"default",(function(){return u}));var a=n(747),o=n(108),i=n(2),s=n(321);function c(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}var u=function(){function t(){var t=this;this._view=void 0,this._container=void 0,this.init=function(){var n,u=(n=r.mark((function e(n){var c,u,d,l,p,f,v,b,g,h,m,y,w,x;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.userGuid,u=n.walkmeEndUserId,d=n.envId,l=n.uuid,p=n.apiBaseUrl,f=n.publicPath,v=n.siteConfig,b=n.isWorkstation,g=n.walkmeOpenUrl,h=n.clientSideSFOauth,m=n.evaluateTagsById,y=n.getUserJsonSettings,w=n.globalConfig,t._view?t._view.update({userGuid:c,walkmeEndUserId:u,uuid:l,apiBaseUrl:p,publicPath:f,siteConfig:v,globalConfig:w}):(t._view=new a.a({userGuid:c,walkmeEndUserId:u,uuid:l,apiBaseUrl:p,publicPath:f,siteConfig:v,clientSideSFOauth:h,globalConfig:w}),t._bindViewEvents()),e.next=4,t._view.init();case 4:return x=e.sent,t._container=new s.b(t._view,w),t._view.emitInside({type:i.W,payload:{envId:d}}),t._view.emitInside({type:i.V,payload:{walkmeEndUserId:u}}),t._view.emitInside({type:i.X,payload:{isWorkstation:b}}),o.a.init({walkmeOpenUrl:g,evaluateTagsById:m,getUserJsonSettings:y}),e.abrupt("return",x);case 11:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new e((function(e,a){var o=n.apply(t,r);function i(t){c(o,e,a,i,s,"next",t)}function s(t){c(o,e,a,i,s,"throw",t)}i(void 0)}))});return function(e){return u.apply(this,arguments)}}(),this.open=function(e,n){return void 0===n&&(n=!1),t._view.open(e,n)},this.show=function(){return t._view.show()},this.hide=function(){return t._view.hide()},this.emitInside=function(){var e;return(e=t._view).emitInside.apply(e,arguments)},this.close=function(){t._view&&t._view.destroy()},this.on=function(e,n){return t._view.on(e,n)},this.off=function(e,n){return t._view.removeListener(e,n)},this.emit=function(e){return t._view.emitInside(e)}}return t.prototype._bindViewEvents=function(){if(!this._view)throw new Error("Invalid view");this._view.on(i.i,this.hide),this._view.on(i.j,this.show)},t}()}.call(this,n(33).Promise,n(42))},747:function(e,t,n){"use strict";(function(e,r,a){n.d(t,"a",(function(){return w}));var o=n(748),i=n.n(o),s=n(9),c=n(30),u=n(2),d=n(1),l=n(48),p=n(12);function f(){return(f=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t,n,a,o,i,s){try{var c=e[i](s),u=c.value}catch(e){return void n(e)}c.done?t(u):r.resolve(u).then(a,o)}function b(e){return function(){var t=this,n=arguments;return new r((function(r,a){var o=e.apply(t,n);function i(e){v(o,r,a,i,s,"next",e)}function s(e){v(o,r,a,i,s,"throw",e)}i(void 0)}))}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h={position:"fixed",width:"100%",height:"100%",top:0,left:0,pointerEvents:"none",zIndex:9999999999},m={position:"absolute",height:"550px",width:25*(window&&window.innerWidth||1)>400?"400px":"25%",minWidth:"320px",top:0,left:0,bottom:0,right:0,margin:"auto",borderRadius:"4px",boxShadow:"0px 2px 15px #DDE5F5BF",overflow:"hidden",userSelect:"none",pointerEvents:"auto"},y={width:"100%",height:"100%",border:"0",position:"absolute",top:"0",left:"0",display:"block"},w=function(t){var o,i;function v(o){var i;return(i=t.call(this)||this)._wmBotWrapper=void 0,i._wmBotContainer=void 0,i._iframe=void 0,i.update=function(e){i.createOrUpdatePrivates(e)},i.createOrUpdatePrivates=function(e){var t=e.userGuid,n=e.walkmeEndUserId,r=e.uuid,a=e.apiBaseUrl,o=e.publicPath,s=e.siteConfig,c=e.globalConfig,u=e.clientSideSFOauth;i._userGuid=t,i._clientSideSFOauth=u,i._walkmeEndUserId=n,i._uuid=r,i._apiBaseUrl=i._getActionBotApiBaseUrl(a),i._publicPath=o,i._siteConfig=s,i._globalConfig=c},i.init=b(a.mark((function t(){var o,p,v,b,g,w,x;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Boolean(document.getElementById(d.s))?i.tryInitSession():(i._wmBotWrapper=document.createElement("div"),i._wmBotWrapper.className=d.Q+" "+d.Q+"-latest",e(i._wmBotWrapper.style,h),i._wmBotContainer=document.createElement("div"),i._wmBotContainer.className=d.P,o=f({},i._globalConfig&&i._globalConfig.initialSize&&f({},i._globalConfig.initialSize)),e(i._wmBotContainer.style,m,o),i._iframe=document.createElement("iframe"),i._iframe.id=d.s,i._iframe.setAttribute("title","WalkMe ActionBot"),e(i._iframe.style,y),p=window,v=p._walkmeExtension,b=v&&v.nonceValue||"",g=window.document.documentElement.lang||"",w='\n      <head>\n          <meta charset="utf-8">\n          <link href="'+i._publicPath+"chat."+n.h+'.css" rel="stylesheet">\n      </head>\n      <body style="margin: 0" lang="'+g+'">\n          <div id="root"></div>\n      </body>\n    ',i._wmBotContainer.appendChild(i._iframe),i._wmBotWrapper.appendChild(i._wmBotContainer),(x=s.a.deps.topContainerProvider.getTopContainer())&&x[0]?x[0].appendChild(i._wmBotWrapper):c.a.error(new Error("Can't find top container."),!0),i._iframe.contentWindow.document.write(w),i._iframe.contentWindow.publicPath=i._publicPath,i._iframe.onload=function(){var e=i._iframe.contentWindow.document.createElement("script");e.setAttribute("nonce",b),e.onload=function(){i.emitInside({type:u.N,payload:{func:function(e){if(e&&e.type)return i.emit(e.type,e.payload)}}}),i.emitInside({type:u.U,payload:{apiBaseUrl:i._apiBaseUrl}}),i.tryInitSession()},e.src=i._publicPath+"chat."+n.h+".js",i._iframe.contentWindow.document.head.appendChild(e)},i._iframe.contentWindow.document.close(),i.hide()),t.abrupt("return",new r((function(e,t){i.on(u.P,(function(t){Object(l.h)(t),e(t)})),i.on(u.O,(function(e){Object(l.h)(e),t(e)}))})));case 3:case"end":return t.stop()}}),t)}))),i.tryInitSession=function(){i.emitInside({type:u.vb,payload:{walkmeEndUserId:i._walkmeEndUserId,userGuid:i._userGuid,clientSideSFOauth:i._clientSideSFOauth,uuid:i._uuid,siteConfig:i._siteConfig,globalConfig:i._globalConfig}})},i.open=function(){var e=b(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.emitInside({type:u.a,payload:f({},t,{forceUpdate:n})}),e.abrupt("return",new r((function(e,t){i.on(u.j,e),i.on(u.M,(function(){return t(u.M)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i.show=function(){i._wmBotWrapper.style.opacity=1,i._wmBotWrapper.style.zIndex=h.zIndex,i._wmBotContainer.style.boxShadow=m.boxShadow,i.emitInside({type:u.l,payload:{visibility:!0}})},i.hide=function(){i._wmBotWrapper.style.opacity=0,i._wmBotWrapper.style.zIndex="-1",i._wmBotContainer.style.boxShadow="none",i.emitInside({type:u.l,payload:{visibility:!1}})},i._getActionBotApiBaseUrl=function(e){return e+"/chatbot"},i.createOrUpdatePrivates(o),i}i=t,(o=v).prototype=Object.create(i.prototype),o.prototype.constructor=o,g(o,i);var w=v.prototype;return w.emitInside=function(e){this._iframe&&this._iframe.contentWindow&&this._iframe.contentWindow.onWalkMeMessage&&"function"==typeof this._iframe.contentWindow.onWalkMeMessage&&this._iframe.contentWindow.onWalkMeMessage(e)},w.destroy=function(){Object(p.p)(this._wmBotWrapper),Object(p.p)(this._wmBotContainer),this._wmBotWrapper=null,this._wmBotContainer=null,this._iframe=null},v}(i.a)}).call(this,n(14).assign,n(33).Promise,n(42))}}]);